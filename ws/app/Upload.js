WS.Upload={};WS.Upload.Dialog=Core.extend(Echo.WindowPane,{_r:null,_upload:null,_statusLabel:null,_controlsRow:null,contentLayout:null,$construct:function(a){this._r=WS.getResources();var b=(!WS.lite&&a.multiple)?FileTransfer.MultipleUploadSelect:FileTransfer.UploadSelect;Echo.WindowPane.call(this,{styleName:"Default",title:a.title,icon:this._r.i["Upload.WindowIcon"],modal:true,width:"32em",closable:false,resizable:true,children:[new Echo.SplitPane({styleName:"ControlPane.SplitBottom",children:[this._controlsRow=new Echo.Row({styleName:"ControlPane",children:[new Echo.Button({styleName:"ControlPane",text:this._r.m["Generic.Cancel"],icon:this._r.i["Generic.Cancel"],events:{action:Core.method(this,this._cancel)}})]}),this.contentLayout=new Echo.Column({insets:20,cellSpacing:20,children:[new Echo.Label({text:a.fileDescription}),new Echo.Column({styleName:"FormBox",children:[this._statusLabel=new Echo.Label({styleName:"FormTitle",text:a.filePrompt}),this._upload=new b({text:this._r.m["Upload.SelectFiles"],styleName:"Default",receiver:a.receiver,monitor:a.receiver,events:{uploadComplete:Core.method(this,function(c){this.parent.remove(this);
this.fireEvent({type:"action",source:this,fileId:c.data});}),uploadCancel:Core.method(this,function(c){this.parent.remove(this);}),uploadFail:Core.method(this,function(c){this.application.displayError();this.parent.remove(this);})}})]})]})]})]});},_cancel:function(a){if(this._upload.sending){this._upload.cancel();}else{this.parent.remove(this);}}});