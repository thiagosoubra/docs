WS.Util={_TRIM_LEADING:/^\s*/,_TRIM_TRAILING:/\s*$/,COMPACT_URL_XML_REPLACE_TABLE:{"(":"<","<":"(",")":">",">":")","~":"=","=":"~","!":"/","/":"!","_":" "," ":"_","'":'"','"':"'"},charReplace:function(d,e){var a="";for(var b=0;b<d.length;++b){var c=d.charAt(b);a+=c in e?e[c]:c;}return a;},encodeURIComponent:function(a){a=a||"";return encodeURIComponent(a).replace(/'/g,"%27");},formatDate:function(f,d){var c=new Date(d);var b=[];var e=c.getHours();var a=c.getMinutes();b.push(c.getDate());b.push("/");b.push(f.m["Generic.Months.Short"][c.getMonth()]);b.push("/");b.push(c.getFullYear());b.push(" ");b.push(e<10?"0":"");b.push(e);b.push(":");b.push(a<10?"0":"");b.push(a);return b.join("");},formatTimeMSS:function(b){b=Math.round(b);var a=((b-b%60)/60);b=b%60;return a+":"+(b<10?"0":"")+b;},formatDecimal:function(b){var a=Math.round(b*10);return Math.floor(a/10)+"."+(a%10);},formatBytes:function(a){if(a<1024){return a+" bytes";}else{if(a<1024*1024){return WS.Util.formatDecimal(a/1024)+" KiB";}else{if(a<1024*1024*1024){return WS.Util.formatDecimal(a/(1024*1024))+" MiB";
}else{return WS.Util.formatDecimal(a/(1024*1024*1024))+" GiB";}}}},formatTimeRemaining:function(c){c=Math.round(c);var a=Math.floor(c/3600);var b=Math.floor(c/60)%60;var d=c%60;if(a>0){return a+(b<10?":0":":")+b+(d<10?":0":":")+d+" remaining";}else{return b+(d<10?":0":":")+d+" remaining";}},formatBytesSecond:function(a){if(a<1024){return a+" bytes/s";}else{if(a<1024*1024){return WS.Util.formatDecimal(a/1024)+" KiB/s";}else{if(a<1024*1024*1024){return WS.Util.formatDecimal(a/(1024*1024))+" MiB/s";}else{return WS.Util.formatDecimal(a/(1024*1024*1024))+" GiB/s";}}}},trim:function(a){return a.replace(WS.Util._TRIM_LEADING,"").replace(WS.Util._TRIM_TRAILING,"");}};WS.DOM={};WS.DOM.toString=function(a){return WS.DOM._renderNode(a.documentElement);};WS.DOM._escapeText=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a;};WS.DOM._renderNode=function(e){var a;switch(e.nodeType){case 1:a="<"+e.nodeName;for(var c=0;c<e.attributes.length;
++c){a+=" "+e.attributes[c].name+'="'+WS.DOM._escapeText(e.attributes[c].value)+'"';}var d="";var b=e.firstChild;while(b){d+=WS.DOM._renderNode(b);b=b.nextSibling;}if(d){a+=">"+d+"</"+e.nodeName+">";}else{a+="/>";}break;case 3:a=WS.DOM._escapeText(e.nodeValue);break;default:a="";}return a;};WS.Dialog=Core.extend(Echo.WindowPane,{$static:{CONTROLS_OK:[{resourceKey:"Generic.Ok",actionCommand:"ok"}],CONTROLS_OK_CANCEL:[{resourceKey:"Generic.Ok",actionCommand:"ok"},{resourceKey:"Generic.Cancel",actionCommand:"cancel"}],CONTROLS_YES_NO:[{resourceKey:"Generic.Yes",actionCommand:"yes"},{resourceKey:"Generic.No",actionCommand:"no"}]},_controlsRow:null,_contentContainer:null,$construct:function(f,g,d,j,h,b){var a=WS.getResources();var e=[];if(j){e.push(new Echo.Label({icon:j}));}if(d){if(d instanceof Echo.Component){e.push(d);}else{e.push(new Echo.Label({text:d,formatWhitespace:true}));}}Echo.WindowPane.call(this,{styleName:"Default",modal:true,resizable:false,closable:false,title:f,icon:g,width:"32em",events:{close:Core.method(this,this._processCancel),init:Core.method(this,function(k){if(this._controlsRow.children.length>0){var i=this.application.getFocusedComponent();
if(!i||this==i||!this.isAncestorOf(i)){this.application.setFocusedComponent(this._controlsRow.children[0]);}}})},children:[new Echo.SplitPane({styleName:"ControlPane.SplitBottom",children:[this._controlsRow=new Echo.Row({styleName:"ControlPane"}),new Echo.Row({layoutData:{background:"#f5f5f5"},insets:20,cellSpacing:20,children:e})]})]});if(!h){h=WS.Dialog.CONTROLS_OK;}for(var c=0;c<h.length;++c){this._controlsRow.add(new Echo.Button({styleName:"ControlPane",text:a.m[h[c].resourceKey],icon:h[c].icon||a.i[h[c].resourceKey],actionCommand:h[c].actionCommand,events:{action:Core.method(this,this._processControlAction)}}));}if(b){this.addListener("action",b);}},_processControlAction:function(a){this.parent.remove(this);this.fireEvent({source:this,type:"action",actionCommand:a.actionCommand});}});WS.HtmlLabel=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("WS.HtmlLabel",this);},componentType:"WS.HtmlLabel"});WS.HtmlLabelSync=Core.extend(Echo.Render.ComponentSync,{$load:function(){Echo.Render.registerPeer("WS.HtmlLabel",this);
},_spanElement:null,renderAdd:function(b,a){this._spanElement=document.createElement("span");Echo.Sync.Font.render(this.component.render("font"),this._spanElement);Echo.Sync.Color.renderFB(this.component,this._spanElement);this._spanElement.innerHTML=this.component.render("html","");a.appendChild(this._spanElement);},renderDispose:function(a){this._spanElement=null;},renderUpdate:function(c){var a=this._spanElement;var b=a.parentNode;this.renderDispose(c);b.removeChild(a);this.renderAdd(c,b);return false;}});WS.IFrame=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("WS.IFrame",this);},componentType:"WS.IFrame",pane:true});WS.IFrameSync=Core.extend(Echo.Render.ComponentSync,{$load:function(){Echo.Render.registerPeer("WS.IFrame",this);},_iframe:null,renderAdd:function(b,a){this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;";this._iframe.src=this.component.get("src")||"about:blank";
this._iframe.style.border="0px none";this._iframe.frameBorder="0";a.appendChild(this._iframe);},renderDispose:function(a){this._iframe=null;},renderUpdate:function(c){var a=this._iframe;var b=a.parentNode;this.renderDispose(c);b.removeChild(a);this.renderAdd(c,b);return false;}});