WS.TextDisplayWindow=Core.extend(Echo.WindowPane,{$construct:function(a){this._r=WS.getResources();Echo.WindowPane.call(this,{styleName:"Default",openAnimationTime:0,closeAnimationTime:0,closable:true,maximizeEnabled:true,title:this._r.m["TextDisplayWindow.Title"],icon:this._r.i["TextDisplayWindow.Icon"],contentWidth:"75%",contentHeight:"75%",events:{init:Core.method(this,function(b){this._doLoad(a);}),close:Core.method(this,function(b){this.parent.remove(this);})},children:[new Echo.SplitPane({styleName:"ControlPane.SplitBottom",children:[new Echo.SplitPane({orientation:Echo.SplitPane.ORIENTATION_HORIZONTAL_RIGHT_LEFT,separatorPosition:"10em",children:[new Echo.Row({styleName:"ControlPane",children:[new Echo.Button({styleName:"ControlPane",icon:this._r.i["TextDisplayWindow.Download"],text:this._r.m["TextDisplayWindow.Download"],events:{action:Core.method(this,function(b){this.fireEvent({source:this,type:"download"});})}})]}),new Echo.Row({styleName:"ControlPane",children:[new Echo.CheckBox({styleName:"ControlPane",iconTextMargin:0,icon:this._r.i["TextDisplayWindow.Wrap"],text:this._r.m["TextDisplayWindow.Wrap"],selected:true,events:{action:Core.method(this,this._processWrap)}}),new Echo.CheckBox({styleName:"ControlPane",iconTextMargin:2,icon:this._r.i["TextDisplayWindow.Fixed"],text:this._r.m["TextDisplayWindow.Fixed"],events:{action:Core.method(this,this._processFixed)}})]})]}),new Echo.ContentPane({background:"#ffffff",foreground:"#000000",children:[new Echo.Panel({insets:"1ex",children:[this._content=new Echo.Label({formatWhitespace:true})]})]})]})]});
},_doLoad:function(a){var b=new Core.Web.HttpConnection(a,"GET");b.addResponseListener(Core.method(this,function(c){this._content.set("text",c.source.getResponseText());}));b.connect();},_processFixed:function(b){var a=b.source.get("selected");this._content.set("font",a?{typeface:"monospace"}:null);},_processWrap:function(b){var a=b.source.get("selected");this._content.set("lineWrap",a);}});