WS.FlashVideoPlayerWindow=Core.extend(WS.VideoPlayerWindow,{$construct:function(a){WS.VideoPlayerWindow.call(this,a);},isFlash:function(){return true;},loadVideo:function(){this.content.add(new WS.FlashVideoDisplay({video:this._url,events:{load:Core.method(this,this.processLoad),start:Core.method(this,this.processStart)}}));}});WS.FlashVideoDisplay=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("WS.FlashVideoDisplay",this);},componentType:"WS.FlashVideoDisplay",doLoad:function(){this.fireEvent({source:this,type:"load"});},doStart:function(){this.fireEvent({source:this,type:"start"});}});WS.FlashVideoDisplay.Sync=Core.extend(Echo.Render.ComponentSync,{_started:false,_loaded:false,$load:function(){Echo.Render.registerPeer("WS.FlashVideoDisplay",this);},_processStart:function(a){if(this._started){return;}this._started=true;this.component.doStart();},renderAdd:function(d,c){this._div=document.createElement("div");this._div.style.cssText="width:100%;height:100%;";
var b=document.createElement("a");b.style.cssText="display:block;width:100%;height:100%;";b.id="VideoPlayer";this._div.appendChild(b);c.appendChild(this._div);},renderDisplay:function(){var b=new Core.Web.Measure.Bounds(this._div);if(this._loaded){return;}var a=encodeURI(this.component.get("video")).replace(/&/g,"%26");flowplayer("VideoPlayer","lib/flowplayer/flowplayer-3.2.16.swf",{clip:{url:a,scaling:"fit",onStart:Core.method(this,this._processStart),onBeforeStop:function(){this.pause();this.seek(0);return false;},onBeforeFinish:function(){this.pause();this.seek(0);return false;}}});this._loaded=true;this.component.doLoad();},renderDispose:function(a){this._started=false;this._loaded=false;this._div=null;},renderUpdate:function(c){var a=this._div;var b=a.parentNode;Echo.Render.renderComponentDispose(c,c.parent);b.removeChild(a);this.renderAdd(c,b);return true;}});