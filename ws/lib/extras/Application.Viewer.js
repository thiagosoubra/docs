Extras.Viewer={};Extras.Viewer.Model=Core.extend({$abstract:{fetch:function(b,a){},get:function(a){},size:function(){}},$construct:function(){this._listeners=new Core.ListenerList();},addUpdateListener:function(a){this._listeners.addListener("update",a);},refresh:function(){this._listeners.fireEvent({source:this,type:"update",refresh:true});},removeUpdateListener:function(a){this._listeners.removeListener("update",a);},update:function(b,a){this._listeners.fireEvent({source:this,type:"update",startIndex:b,endIndex:a==null?b+1:a});}});Extras.Viewer.NullModel=Core.extend(Extras.Viewer.Model,{fetch:function(b,a){},get:function(a){return null;},size:function(){return 0;}});Extras.Viewer.CachingModel=Core.extend(Extras.Viewer.Model,{_cache:null,_count:null,$construct:function(){Extras.Viewer.Model.call(this);this._cache={};},$abstract:{fetchImpl:function(b,a){}},$virtual:{emptyFetch:20,overFetch:10},cacheStore:function(f,d,a,c,e){for(var b=0;b<a.length;++b){this._cache[f+b]=a[b];}if(e||this._count!==c){this._count=c;
this.refresh();}else{this.update(f,d);}},fetch:function(e,d){e=Math.max(e-this.overFetch,0);d=Math.min(d+this.overFetch,this.size());if(d===0){this.fetchImpl(0,this.emptyFetch);}else{var c=null,b=null;for(var a=e;a<d;++a){if(!this._cache[a]){if(c===null){c=a;}b=a;}}if(c!==null){this.fetchImpl(c,b+1);}}},get:function(a){return this._cache[a];},size:function(){return this._count||0;}});