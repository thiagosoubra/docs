Extras.Sync.TabPane=Core.extend(Echo.Render.ComponentSync,{$static:{_TABLE:null,_createTable:function(){if(!this._TABLE){this._TABLE=document.createElement("table");this._TABLE.style.cssText="border-collapse:collapse;padding:0;";var a=document.createElement("tbody");this._TABLE.appendChild(a);var b=document.createElement("tr");a.appendChild(b);}return this._TABLE.cloneNode(true);},_supportedPartialProperties:["activeTabId","activeTabIndex"],_DEFAULTS:{borderType:Extras.TabPane.BORDER_TYPE_ADJACENT_TO_TABS,foreground:"#000000",insets:2,tabActiveBorder:"1px solid #00004f",tabActiveHeightIncrease:2,tabAlignment:"top",tabCloseIconTextMargin:5,tabContentInsets:0,tabIconTextMargin:5,tabInactiveBorder:"1px solid #7f7f7f",tabInset:10,tabInsets:"1px 8px",tabPosition:Extras.TabPane.TAB_POSITION_TOP,tabSpacing:0},ScrollRunnable:Core.extend(Core.Web.Scheduler.Runnable,{repeat:true,timeInterval:20,reverse:false,distance:0,clickDistance:50,pixelsPerSecond:400,initialPosition:null,disposed:false,peer:null,lastInvokeTime:null,$construct:function(b,a){this.peer=b;
this.reverse=a;this.initialPosition=b.scrollPosition;this.lastInvokeTime=new Date().getTime();},dispose:function(){if(!this.disposed){Core.Web.Scheduler.remove(this);}this.disposed=true;},finish:function(){if(this.distance<this.clickDistance){this.distance=this.clickDistance;this.updatePosition();}this.peer.renderDisplay();this.dispose();},run:function(){var a=new Date().getTime();this.distance+=Math.ceil(this.pixelsPerSecond*(a-this.lastInvokeTime)/1000);this.lastInvokeTime=a;this.updatePosition();},updatePosition:function(){var a=this.initialPosition+((this.reverse?-1:1)*this.distance);if(!this.peer.setScrollPosition(a)){this.dispose();}}})},$load:function(){Echo.Render.registerPeer("Extras.TabPane",this);},_icons:null,_div:null,_contentContainerDiv:null,_headerContainerBoundsDiv:null,_headerContainerDiv:null,_activeTabId:null,_displayedTabId:null,_previousControlDiv:null,_nextControlDiv:null,_pendingRollover:null,_rolloverTabId:null,_rolloverTabCloseState:false,_rolloverRunnable:null,_tabs:null,_totalTabWidth:0,_headerHeight:null,_layoutRequired:false,_headerImageLoadingComplete:false,_headerUpdateRequired:false,_tabSelectListenerRef:null,_scrollRunnable:null,scrollPosition:0,_rtl:false,$construct:function(){this._tabs=[];
this._tabSelectListenerRef=Core.method(this,this._tabSelectListener);},_addTab:function(c,b,a){if(a==null||a==this._tabs.length){this._tabs.push(b);b._renderAdd(c);this._headerContainerDiv.appendChild(b._headerDiv);this._contentContainerDiv.appendChild(b._contentDiv);}else{this._tabs.splice(a,0,b);b._renderAdd(c);this._headerContainerDiv.insertBefore(b._headerDiv,this._headerContainerDiv.childNodes[a]);this._contentContainerDiv.insertBefore(b._contentDiv,this._contentContainerDiv.childNodes[a]);}},_renderLayout:function(){if(!this._layoutRequired){return;}this._renderHeaderPositions();if(this._headerHeight===0){return;}this._layoutRequired=false;if(this._borderDiv){this._borderDiv.style[this._tabSide]=(this._headerHeight-this._ibContentInsetsPx[this._tabSide])+"px";}var b=this._borderType==Extras.TabPane.BORDER_TYPE_NONE?0:Echo.Sync.Border.getPixelSize(this._border);this._headerContainerBoundsDiv.style.height=this._headerHeight+"px";this._contentContainerDiv.style.left=this._contentContainerDiv.style.right=this._contentContainerDiv.style[this._oppositeSide]=0;
this._contentContainerDiv.style[this._tabSide]=(this._headerHeight-b)+"px";Core.Web.VirtualPosition.redraw(this._contentContainerDiv);Core.Web.VirtualPosition.redraw(this._headerContainerDiv);Core.Web.VirtualPosition.redraw(this._headerContainerBoundsDiv);for(var a=0;a<this._tabs.length;++a){this._tabs[a]._renderDisplay();}if(!this._headerImageLoadingComplete){this._headerImageLoadingComplete=true;var c=Core.method(this,function(){if(this.component){this._layoutRequired=true;this._renderLayout();}});c.id="TabPane:"+this.component.renderId;Core.Web.Image.monitor(this._headerContainerDiv,c);}},_renderHeaderPositions:function(){var c=0,l=0,a,k,d,j=this._tabHeight?(this._tabHeight+"px"):"";this._totalTabWidth=0;this._headerHeight=0;var b=this.component.render("tabWidth")?null:this.component.render("tabMaximumWidth");var g;if(b){if(Echo.Sync.Extent.isPercent(b)){var h=parseInt(b,10);g=Math.floor(this._tabContainerWidth*h/100);}else{g=Echo.Sync.Extent.toPixels(b);}}for(d=0;d<this._tabs.length;
++d){this._tabs[d]._heightTd.style.height=j;if(g){this._tabs[d]._textDiv.style.width="";var f=new Core.Web.Measure.Bounds(this._tabs[d]._textDiv,{flags:Core.Web.Measure.Bounds.FLAG_MEASURE_DIMENSION});if(f.width>g){this._tabs[d]._textDiv.style.width=g+"px";}}var e=new Core.Web.Measure.Bounds(this._tabs[d]._headerDiv,{flags:Core.Web.Measure.Bounds.FLAG_MEASURE_DIMENSION});var m=this._tabActiveHeightIncreasePx+this._tabInactivePositionAdjustPx+this._tabs[d]._activeSurroundHeight-this._tabs[d]._inactiveSurroundHeight;if(this._tabs[d]._active){a=e.height;k=e.height-m;}else{k=e.height;a=e.height+m;}l=k>l?k:l;c=a>c?a:c;this._tabs[d]._headerDiv.style.left=this._totalTabWidth+"px";this._tabs[d]._headerDiv.style.zIndex=(this._rolloverTabId===this._tabs[d].id)?(this._tabs.length):(this._tabs[d]._active?this._tabs.length+1:d);this._totalTabWidth+=e.width;if(d<this._tabs.length-1){this._totalTabWidth+=this._tabSpacingPx;}}for(d=0;d<this._tabs.length;++d){if(this._tabs[d]._active){this._tabs[d]._heightTd.style.height=(c-(this._tabs[d]._activeSurroundHeight+this._tabInactivePositionAdjustPx+this._tabActiveHeightIncreasePx))+"px";
}else{this._tabs[d]._heightTd.style.height=(l-this._tabs[d]._inactiveSurroundHeight)+"px";}}this._headerHeight=c>l?c:l;if(Core.Web.VirtualPosition.enabled){for(d=0;d<this._tabs.length;++d){if(this._tabs[d]._fibContainer){Echo.Sync.FillImageBorder.renderContainerDisplay(this._tabs[d]._fibContainer);Core.Web.VirtualPosition.redraw(this._tabs[d]._backgroundDiv);}}}},_getActiveTabId:function(){var a=this.component.get("activeTabId");if(!a){var b=this.component.get("activeTabIndex");if(b!=null&&b<this.component.children.length){a=this.component.children[b].renderId;}}return a;},_getSeparatorHeight:function(){if(this._borderType==Extras.TabPane.BORDER_TYPE_NONE){return 0;}if(this._imageBorder){return 0;}return Echo.Sync.Border.getPixelSize(this._border,this._tabSide);},_getTabById:function(a){for(var b=0;b<this._tabs.length;++b){var c=this._tabs[b];if(c.id==a){return c;}}return null;},isChildVisible:function(a){return a.renderId==this._activeTabId;},_processScrollRollover:function(c){if(!this.client||!this.client.verifyInput(this.component)){return;
}var b=c.registeredTarget===this._previousControlDiv;var d=c.type=="mouseover";var a;if(d){a=b?this._icons.rolloverScrollLeftIcon:this._icons.rolloverScrollRightIcon;if(!a&&!(b?this._icons.scrollLeftIcon:this._icons.scrollRightIcon)){a=this.client.getResourceUrl("Extras",b?"image/tabpane/PreviousRollover.png":"image/tabpane/NextRollover.png");}}else{a=b?this._icons.scrollLeftIcon:this._icons.scrollRightIcon;if(!a){a=this.client.getResourceUrl("Extras",b?"image/tabpane/Previous.png":"image/tabpane/Next.png");}}if(a){c.registeredTarget.firstChild.src=Echo.Sync.ImageReference.getUrl(a);}},_processScrollStart:function(a){if(!this.client||!this.client.verifyInput(this.component)){return;}this._scrollRunnable=new Extras.Sync.TabPane.ScrollRunnable(this,a.registeredTarget===this._previousControlDiv);Core.Web.Scheduler.add(this._scrollRunnable);},_processScrollStop:function(a){if(!this._scrollRunnable){return;}this._scrollRunnable.finish();this._scrollRunnable=null;},_removeTab:function(b){var a=Core.Arrays.indexOf(this._tabs,b);
if(a==-1){return;}if(b.id==this._activeTabId){this._activeTabId=null;}this._tabs.splice(a,1);Core.Web.DOM.removeNode(b._headerDiv);Core.Web.DOM.removeNode(b._contentDiv);b._renderDispose();},renderAdd:function(g,a){this._headerImageLoadingComplete=false;this.component.addListener("tabSelect",this._tabSelectListenerRef);this._icons={scrollLeftIcon:this.component.render("scrollLeftIcon"),scrollRightIcon:this.component.render("scrollRightIcon"),rolloverScrollLeftIcon:this.component.render("rolloverScrollLeftIcon"),rolloverScrollRightIcon:this.component.render("rolloverScrollRightIcon")};this._rtl=!this.component.getRenderLayoutDirection().isLeftToRight();this._activeTabId=this._getActiveTabId();this._tabRolloverEnabled=this.component.render("tabRolloverEnabled");this._insets=this.component.render("insets",Extras.Sync.TabPane._DEFAULTS.insets);this._tabActiveBorder=this.component.render("tabActiveBorder",Extras.Sync.TabPane._DEFAULTS.tabActiveBorder);this._imageBorder=this.component.render("imageBorder");
this._border=this._imageBorder?null:this._border=this.component.render("border",this._tabActiveBorder);this._borderType=this.component.render("borderType",Extras.Sync.TabPane._DEFAULTS.borderType);this._tabInactiveBorder=this.component.render("tabInactiveBorder",Extras.Sync.TabPane._DEFAULTS.tabInactiveBorder);this._tabInsetPx=Echo.Sync.Extent.toPixels(this.component.render("tabInset",Extras.Sync.TabPane._DEFAULTS.tabInset));this._tabPositionBottom=this.component.render("tabPosition",Extras.Sync.TabPane._DEFAULTS.tabPosition)==Extras.TabPane.TAB_POSITION_BOTTOM;this._tabSide=this._tabPositionBottom?"bottom":"top";this._oppositeSide=this._tabPositionBottom?"top":"bottom";this._tabSpacingPx=Echo.Sync.Extent.toPixels(this.component.render("tabSpacing",Extras.Sync.TabPane._DEFAULTS.tabSpacing));this._tabActiveHeightIncreasePx=Echo.Sync.Extent.toPixels(this.component.render("tabActiveHeightIncrease",Extras.Sync.TabPane._DEFAULTS.tabActiveHeightIncrease));this._tabInactivePositionAdjustPx=this._getSeparatorHeight();
this._tabCloseEnabled=this.component.render("tabCloseEnabled",false);if(this._tabCloseEnabled){this._icons.defaultIcon=this.component.render("tabCloseIcon");this._icons.disabledIcon=this.component.render("tabDisabledCloseIcon");this._icons.rolloverIcon=this.component.render("tabRolloverCloseIcon");}this._tabActiveInsets=Echo.Sync.Insets.toPixels(this.component.render("tabActiveInsets"));this._tabInactiveInsets=Echo.Sync.Insets.toPixels(this.component.render("tabInactiveInsets"));this._tabHeight=Echo.Sync.Extent.toPixels(this.component.render("tabHeight"),false)||0;var e=Echo.Sync.Insets.toPixels(this._insets);if(this._imageBorder){this._ibBorderInsetsPx=Echo.Sync.Insets.toPixels(this._imageBorder.borderInsets);this._ibContentInsetsPx=Echo.Sync.Insets.toPixels(this._imageBorder.contentInsets);}if(this._borderType==Extras.TabPane.BORDER_TYPE_SURROUND){if(this._imageBorder){e[this._oppositeSide]+=this._ibContentInsetsPx[this._oppositeSide];e.left+=this._ibContentInsetsPx.left;e.right+=this._ibContentInsetsPx.right;
}}else{if(this._borderType==Extras.TabPane.BORDER_TYPE_PARALLEL_TO_TABS){if(this._imageBorder){this._imageBorder={color:this._imageBorder.color,borderInsets:this._ibBorderInsetsPx.top+"px 0 "+this._ibBorderInsetsPx.bottom+"px",contentInsets:this._ibContentInsetsPx.top+"px 0 "+this._ibContentInsetsPx.bottom+"px",top:this._imageBorder.top,bottom:this._imageBorder.bottom};e[this._oppositeSide]+=this._ibContentInsetsPx[this._oppositeSide];}e.left=e.right=0;}else{if(this._imageBorder){var f=this._tabPositionBottom?"0 0 ":"";var c=this._tabPositionBottom?"":" 0 0";this._imageBorder={color:this._imageBorder.color,borderInsets:f+this._ibBorderInsetsPx[this._tabSide]+"px"+c,contentInsets:f+this._ibContentInsetsPx[this._tabSide]+"px"+c,top:this._imageBorder.top};}e.left=e.right=e[this._oppositeSide]=0;}}this._div=document.createElement("div");this._div.id=this.component.renderId;this._div.style.cssText="position:absolute;top:"+e.top+"px;right:"+e.right+"px;bottom:"+e.bottom+"px;left:"+e.left+"px;";
this._headerContainerBoundsDiv=document.createElement("div");this._headerContainerBoundsDiv.style.cssText="position:absolute;overflow:hidden;z-index:1;"+(this._tabPositionBottom?"bottom":"top")+":0;"+"left:"+this._tabInsetPx+"px;right:"+this._tabInsetPx+"px;";this._div.appendChild(this._headerContainerBoundsDiv);this._headerContainerDiv=document.createElement("div");this._headerContainerDiv.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;";Echo.Sync.Font.render(this.component.render("font"),this._headerContainerDiv);Echo.Sync.FillImage.render(this.component.render("tabBackgroundImage"),this._headerContainerDiv);this._headerContainerBoundsDiv.appendChild(this._headerContainerDiv);if(this._imageBorder){this._borderDiv=Echo.Sync.FillImageBorder.renderContainer(this._imageBorder,{absolute:true});if(this._tabPositionBottom){this._borderDiv.style.top=(0-this._ibContentInsetsPx.top)+"px";this._borderDiv.style.bottom=0;}else{this._borderDiv.style.top=0;this._borderDiv.style.bottom=(0-this._ibContentInsetsPx.bottom)+"px";
}this._borderDiv.style.left=(0-this._ibContentInsetsPx.left)+"px";this._borderDiv.style.right=(0-this._ibContentInsetsPx.right)+"px";this._div.appendChild(this._borderDiv);}this._contentContainerDiv=document.createElement("div");this._contentContainerDiv.style.cssText="position:absolute;overflow:hidden;";Echo.Sync.renderComponentDefaults(this.component,this._contentContainerDiv);if(this._border){if(this._borderType==Extras.TabPane.BORDER_TYPE_NONE){this._contentContainerDiv.style.border="0 none";}else{if(this._borderType==Extras.TabPane.BORDER_TYPE_SURROUND){Echo.Sync.Border.render(this._border,this._contentContainerDiv);}else{if(this._borderType==Extras.TabPane.BORDER_TYPE_PARALLEL_TO_TABS){Echo.Sync.Border.render(this._border,this._contentContainerDiv,"borderTop");Echo.Sync.Border.render(this._border,this._contentContainerDiv,"borderBottom");}else{if(this._tabPositionBottom){Echo.Sync.Border.render(this._border,this._contentContainerDiv,"borderBottom");}else{Echo.Sync.Border.render(this._border,this._contentContainerDiv,"borderTop");
}}}}}this._div.appendChild(this._contentContainerDiv);this._verifyActiveTabAvailable();for(var b=0;b<this.component.children.length;++b){var d=new Extras.Sync.TabPane.Tab(this.component.children[b],this);this._addTab(g,d);}this._layoutRequired=true;a.appendChild(this._div);},renderDisplay:function(){var a,b;Core.Web.VirtualPosition.redraw(this._div);this._tabContainerWidth=new Core.Web.Measure.Bounds(this._div,{flags:Core.Web.Measure.Bounds.FLAG_MEASURE_DIMENSION}).width-(2*this._tabInsetPx);this._renderHeaderUpdate();this._renderLayout();if(this._displayedTabId!=this._activeTabId){if(this._displayedTabId!=null){b=this._getTabById(this._displayedTabId);b._renderState(false);}if(this._activeTabId!=null){b=this._getTabById(this._activeTabId);b._renderState(true);}this._displayedTabId=this._activeTabId;}this._renderHeaderPositions();if(this._borderDiv){Core.Web.VirtualPosition.redraw(this._borderDiv);Echo.Sync.FillImageBorder.renderContainerDisplay(this._borderDiv);}Core.Web.VirtualPosition.redraw(this._contentContainerDiv);
Core.Web.VirtualPosition.redraw(this._headerContainerDiv);for(a=0;a<this._tabs.length;++a){this._tabs[a]._renderDisplay();}this.setScrollPosition(this.scrollPosition);},renderDispose:function(b){this.component.removeListener("tabSelect",this._tabSelectListenerRef);this._activeTabId=null;for(var a=0;a<this._tabs.length;a++){this._tabs[a]._renderDispose();}this._tabs=[];this._div=null;this._borderDiv=null;this._headerContainerBoundsDiv=null;this._headerContainerDiv=null;this._contentContainerDiv=null;if(this._previousControlDiv){Core.Web.Event.removeAll(this._previousControlDiv);this._previousControlDiv=null;}if(this._nextControlDiv){Core.Web.Event.removeAll(this._nextControlDiv);this._nextControlDiv=null;}},_renderHeaderUpdate:function(){if(!this._headerUpdateRequired){return;}this._headerUpdateRequired=false;for(var a=0;a<this._tabs.length;++a){this._tabs[a]._loadProperties();this._tabs[a]._renderHeaderState(this._tabs[a].id===this._activeTabId,false,true);}},renderUpdate:function(e){var k=false,d,f;
this._headerImageLoadingComplete=false;if(e.hasUpdatedLayoutDataChildren()){this._headerUpdateRequired=true;}if(!k){if(!Core.Arrays.containsAll(Extras.Sync.TabPane._supportedPartialProperties,e.getUpdatedPropertyNames(),true)){k=true;}}if(!k){var c=false;var h=e.getRemovedChildren();if(h){for(f=0;f<h.length;++f){d=this._getTabById(h[f].renderId);if(!d){continue;}if(h[f].renderId==this._displayedTabId){this._displayedTabId=null;}this._removeTab(d);}}var a=e.getAddedChildren();if(a){for(f=0;f<a.length;++f){d=new Extras.Sync.TabPane.Tab(a[f],this);this._addTab(e,d,this.component.indexOf(a[f]));}}if(e.hasUpdatedProperties()){if(e.getUpdatedProperty("activeTabId")){this._activeTabId=e.getUpdatedProperty("activeTabId").newValue;}else{if(e.getUpdatedProperty("activeTabIndex")){var g=e.getUpdatedProperty("activeTabIndex").newValue;if(g>=0&&g<this.component.children.length){this._activeTabId=this.component.children[g].renderId;}}}}this._verifyActiveTabAvailable();this._layoutRequired=true;}if(k){var b=this._div;
var j=b.parentNode;Echo.Render.renderComponentDispose(e,e.parent);j.removeChild(b);this.renderAdd(e,j);}return k;},_setOversizeEnabled:function(e,c){var a=e?this._previousControlDiv:this._nextControlDiv,b;if(c){if(a){a.style.display="block";}else{a=document.createElement("div");a.style.cssText="position:absolute;z-index:2;cursor:pointer;";a.style[e?"left":"right"]="2px";b=document.createElement("img");a.appendChild(b);Core.Web.Event.add(a,"mousedown",Core.method(this,this._processScrollStart));Core.Web.Event.add(a,"mouseup",Core.method(this,this._processScrollStop));Core.Web.Event.add(a,"mouseover",Core.method(this,this._processScrollRollover));Core.Web.Event.add(a,"mouseout",Core.method(this,this._processScrollRollover));Core.Web.Event.Selection.disable(a);if(e){b.src=this._icons.scrollLeftIcon?Echo.Sync.ImageReference.getUrl(this._icons.scrollLeftIcon):this.client.getResourceUrl("Extras","image/tabpane/Previous.png");this._previousControlDiv=a;}else{b.src=this._icons.scrollRightIcon?Echo.Sync.ImageReference.getUrl(this._icons.scrollRightIcon):this.client.getResourceUrl("Extras","image/tabpane/Next.png");
this._nextControlDiv=a;}this._div.appendChild(a);var f=new Core.Web.Measure.Bounds(this._headerContainerDiv,{flags:Core.Web.Measure.Bounds.FLAG_MEASURE_DIMENSION}).height;var d=Core.method(this,function(){if(b.height&&!isNaN(b.height)){var g=Math.floor((f-b.height)/2);if(g>0){a.style[this._tabPositionBottom?"bottom":"top"]=g+"px";}}});Core.Web.Image.monitor(a,d);d();}}else{if(a){a.style.display="none";}}},_setRolloverTab:function(a,b){this._pendingRollover={tabId:a,state:b};if(!this._rolloverRunnable){this._rolloverRunnable=new Core.Web.Scheduler.MethodRunnable(Core.method(this,function(){this._setRolloverTabImpl(this._pendingRollover.tabId,this._pendingRollover.state);}));}Core.Web.Scheduler.add(this._rolloverRunnable);},_setRolloverTabImpl:function(a,d){var b=this._rolloverTabId&&this._getTabById(this._rolloverTabId);var c=this._getTabById(a);if(d){if(this._rolloverTabId!=a){if(b){b.setRollover(false,false);}this._rolloverTabId=a;c.setRollover(true);}}else{if(this._rolloverTabId==a){this._rolloverTabId=null;
if(b){b.setRollover(false,false);}}else{}}},setScrollPosition:function(b){var a=false,c=this._totalTabWidth>this._tabContainerWidth;b=c?b:0;if(b<0){b=0;a=true;}else{if(b>0&&b>this._totalTabWidth-this._tabContainerWidth){b=this._totalTabWidth-this._tabContainerWidth;a=true;}}this.scrollPosition=b;this._headerContainerDiv.style.left=(0-b)+"px";if(c){this._setOversizeEnabled(true,b>0);this._setOversizeEnabled(false,b<this._totalTabWidth-this._tabContainerWidth);}else{this._setOversizeEnabled(true,false);this._setOversizeEnabled(false,false);}return !a;},_tabSelectListener:function(a){this._activeTabId=a.tab.renderId;Echo.Render.renderComponentDisplay(this.component);},_verifyActiveTabAvailable:function(){for(var a=0;a<this.component.children.length;++a){if(this.component.children[a].renderId==this._activeTabId){return;}}this._activeTabId=this.component.children.length===0?null:this.component.children[0].renderId;}});Extras.Sync.TabPane.Tab=Core.extend({_active:null,_childComponent:null,_fibContainer:null,_parent:null,_headerDiv:null,_contentDiv:null,_closeIconTd:null,_tabCloseEnabled:false,_defaultZIndex:0,_activeSurroundHeight:null,_inactiveSurroundHeight:null,_labelDiv:null,_textDiv:null,id:null,$construct:function(a,b){this.id=a.renderId;
this._childComponent=a;this._parent=b;},_getCloseImage:function(c){var a=this._parent._icons;var b;if(this._tabCloseEnabled){if(c&&this._parent.component.render("tabCloseIconRolloverEnabled")){b=a.rolloverIcon;}}else{b=a.disabledIcon;}return b?b:a.defaultIcon||this._parent.client.getResourceUrl("Extras","image/tabpane/Close.gif");},_getContentInsets:function(){if(this._childComponent.pane){return 0;}else{return this._parent.component.render("defaultContentInsets",Extras.Sync.TabPane._DEFAULTS.tabContentInsets);}},_getProperty:function(a,d,b){var c=this._layoutData[(d?"active":"inactive")+a]||this._parent.component.render((d?"tabActive":"tabInactive")+a);if(!d&&b){c=this._layoutData["rollover"+a]||this._parent.component.render("tabRollover"+a)||c;}return c;},_getSurroundHeight:function(e){var a,c,b,d;a=Echo.Sync.Insets.toPixels(this._getProperty("Insets",e,false)||Extras.Sync.TabPane._DEFAULTS.tabInsets);d=a.top+a.bottom;if(this._useImageBorder){c=this._getProperty("ImageBorder",e,false);
a=Echo.Sync.Insets.toPixels(c.contentInsets);return d+a.top+a.bottom;}else{b=this._getProperty("Border",e,false)||(e?this._parent._tabActiveBorder:this._parent._tabInactiveBorder);return d+Echo.Sync.Border.getPixelSize(b,this._parent._tabSide);}},_loadProperties:function(){this._layoutData=this._childComponent.render("layoutData")||{};this._useImageBorder=this._getProperty("ImageBorder",false,false);this._tabCloseEnabled=this._parent._tabCloseEnabled&&this._layoutData.closeEnabled;this._activeSurroundHeight=this._getSurroundHeight(true);this._inactiveSurroundHeight=this._getSurroundHeight(false);},_processClick:function(a){if(!this._parent||!this._parent.client||!this._parent.client.verifyInput(this._parent.component)){return true;}if(this._closeIconTd&&Core.Web.DOM.isAncestorOf(this._closeIconTd,a.target)){if(!this._tabCloseEnabled){return;}this._parent.component.doTabClose(this.id);}else{this._parent.component.doTabSelect(this.id);}},_processCloseRollover:function(a){var b=a.type=="mouseover"||a.type=="mouseenter";
if(b&&(!this._parent||!this._parent.client||!this._parent.client.verifyInput(this._parent.component))){return true;}this._closeIconTd.firstChild.src=Echo.Sync.ImageReference.getUrl(this._getCloseImage(b));return true;},_processRollover:function(a){var b=a.type=="mouseover"||a.type=="mouseenter";if(b&&(!this._parent||!this._parent.client||!this._parent.client.verifyInput(this._parent.component))){return true;}this._parent._setRolloverTab(this.id,b);},_renderAdd:function(a){this._loadProperties();this._headerDiv=document.createElement("div");this._headerDiv.style.cssText="position:absolute;";this._contentDiv=document.createElement("div");this._contentDiv.style.cssText="position:absolute;top:0;left:0;overflow:auto;";if(Core.Web.Env.BROWSER_MOZILLA&&!Core.Web.Env.BROWSER_FIREFOX){this._contentDiv.style.right="100%";this._contentDiv.style.bottom="100%";}else{this._contentDiv.style.display="none";this._contentDiv.style.right="0";this._contentDiv.style.bottom="0";}Echo.Sync.Insets.render(this._getContentInsets(),this._contentDiv,"padding");
Echo.Render.renderComponentAdd(a,this._childComponent,this._contentDiv);this._renderState(this.id==this._parent._activeTabId);},_renderDisplay:function(){if(this._fibContainer){Echo.Sync.FillImageBorder.renderContainerDisplay(this._fibContainer);Core.Web.VirtualPosition.redraw(this._backgroundDiv);}Core.Web.VirtualPosition.redraw(this._contentDiv);},_renderDispose:function(){Core.Web.Event.removeAll(this._headerDiv);if(this._rolloverRunnable){Core.Web.Scheduler.remove(this._rolloverRunnable);}this._fibContainer=null;this._parent=null;this._childComponent=null;this._headerDiv=null;this._contentDiv=null;this._closeIconTd=null;this._iconImg=null;this._textDiv=null;this._closeImg=null;this._heightTd=null;this._labelDiv=null;this._backgroundDiv=null;},_renderHeader:function(d){var l=this._parent.component,g,m,i,c;Core.Web.Event.removeAll(this._headerDiv);Core.Web.DOM.removeAllChildren(this._headerDiv);this._headerDiv.style[this._parent._tabPositionBottom?"top":"bottom"]=d?0:(this._parent._tabInactivePositionAdjustPx+"px");
if(this._layoutData.toolTipText){this._headerDiv.title=this._layoutData.toolTipText;}this._labelDiv=document.createElement("div");this._labelDiv.style.cssText="position:relative;white-space:nowrap;overflow:hidden;";Echo.Sync.Extent.render(this._parent.component.render("tabWidth"),this._labelDiv,"width",true,false);var e=this._labelDiv;if(this._useImageBorder){var n=this._getProperty("ImageBorder",d,false);var h=this._getProperty("BackgroundInsets",d,false);this._fibContainer=e=Echo.Sync.FillImageBorder.renderContainer(n,{child:this._labelDiv});var a=Echo.Sync.FillImageBorder.getContainerContent(this._fibContainer);a.style.zIndex=2;this._backgroundDiv=document.createElement("div");this._backgroundDiv.style.cssText="position:absolute;z-index:1;";Echo.Sync.Insets.renderPosition(h||n.borderInsets,this._backgroundDiv);this._fibContainer.appendChild(this._backgroundDiv);if(Core.Web.Env.BROWSER_INTERNET_EXPLORER&&Core.Web.Env.BROWSER_VERSION_MAJOR===6){e=Extras.Sync.TabPane._createTable();c=document.createElement("td");
c.style.cssText="padding:0;";c.appendChild(this._fibContainer);e.firstChild.firstChild.appendChild(c);}}else{var f=this._getProperty("Border",d,false)||(d?this._parent._tabActiveBorder:this._parent._tabInactiveBorder);this._backgroundDiv=null;this._fibContainer=null;Echo.Sync.Border.render(f,this._labelDiv,this._parent._tabPositionBottom?"borderBottom":"borderTop");Echo.Sync.Border.render(f,this._labelDiv,"borderLeft");Echo.Sync.Border.render(f,this._labelDiv,"borderRight");}var j=this._layoutData&&this._layoutData.icon;var k=(this._layoutData?this._layoutData.title:null)||"*";var b=this._parent._tabCloseEnabled&&(this._tabCloseEnabled||this._parent._icons.disabledIcon);m=Extras.Sync.TabPane._createTable();i=m.firstChild.firstChild;if(j){c=document.createElement("td");c.style.cssText="padding:0;";Echo.Sync.Alignment.render(this._parent.component.render("tabAlignment",Extras.Sync.TabPane._DEFAULTS.tabAlignment),c,true,this._parent.component);this._iconImg=document.createElement("img");this._iconImg.style.marginRight=Echo.Sync.Extent.toCssValue(this._parent.component.render("tabIconTextMargin",Extras.Sync.TabPane._DEFAULTS.tabIconTextMargin),true,false);
c.appendChild(this._iconImg);i.appendChild(c);}this._heightTd=document.createElement("td");this._heightTd.style.cssText="padding:0px;width:0px;";i.appendChild(this._heightTd);c=document.createElement("td");c.style.cssText="padding:0;";Echo.Sync.Alignment.render(l.render("tabAlignment",Extras.Sync.TabPane._DEFAULTS.tabAlignment),c,true,l);this._textDiv=document.createElement("div");this._textDiv.style.cssText="overflow:hidden;white-space:nowrap;";this._textDiv.appendChild(document.createTextNode(k));c.appendChild(this._textDiv);i.appendChild(c);if(b){this._closeIconTd=document.createElement("td");this._closeIconTd.style.cssText="padding:0;";Echo.Sync.Alignment.render(this._parent.component.render("tabAlignment",Extras.Sync.TabPane._DEFAULTS.tabAlignment),this._closeIconTd,true,this._parent.component);this._closeIconTd.style.padding="0 0 0 "+Echo.Sync.Extent.toCssValue(this._parent.component.render("tabCloseIconTextMargin",Extras.Sync.TabPane._DEFAULTS.tabCloseIconTextMargin),true,false);
this._closeIconTd.style.cursor="pointer";this._closeImg=document.createElement("img");Echo.Sync.ImageReference.renderImg(this._getCloseImage(false),this._closeImg);this._closeIconTd.appendChild(this._closeImg);i.appendChild(this._closeIconTd);}this._labelDiv.appendChild(m);Core.Web.Event.Selection.disable(this._headerDiv);Core.Web.Event.add(this._headerDiv,"click",Core.method(this,this._processClick),false);Core.Web.Event.add(this._headerDiv,Core.Web.Env.PROPRIETARY_EVENT_MOUSE_ENTER_LEAVE_SUPPORTED?"mouseenter":"mouseover",Core.method(this,this._processRollover),false);Core.Web.Event.add(this._headerDiv,Core.Web.Env.PROPRIETARY_EVENT_MOUSE_ENTER_LEAVE_SUPPORTED?"mouseleave":"mouseout",Core.method(this,this._processRollover),false);if(this._tabCloseEnabled){Core.Web.Event.add(this._closeIconTd,Core.Web.Env.PROPRIETARY_EVENT_MOUSE_ENTER_LEAVE_SUPPORTED?"mouseenter":"mouseover",Core.method(this,this._processCloseRollover),false);Core.Web.Event.add(this._closeIconTd,Core.Web.Env.PROPRIETARY_EVENT_MOUSE_ENTER_LEAVE_SUPPORTED?"mouseleave":"mouseout",Core.method(this,this._processCloseRollover),false);
}this._headerDiv.appendChild(e);},_renderHeaderState:function(c,l,a){var k=!this._labelDiv||a;if(k){this._renderHeader(c);}if(!a&&this._active==c&&(c||!this._parent._tabRolloverEnabled||this._rolloverState==l)){return;}if(l){this._defaultZIndex=this._headerDiv.style.zIndex;this._headerDiv.style.zIndex=this._parent.component.children.length;}else{this._headerDiv.style.zIndex=this._defaultZIndex;}this._rolloverState=l;var h=this._parent.component,e,j,g,b;Echo.Sync.Color.renderClear(this._getProperty("Foreground",c,l),this._labelDiv,"color");Echo.Sync.Font.renderClear(this._getProperty("Font",c,l),this._labelDiv);this._labelDiv.style.cursor=c?"default":"pointer";Echo.Sync.Insets.render(this._getProperty("Insets",c,false)||Extras.Sync.TabPane._DEFAULTS.tabInsets,this._labelDiv,"padding");this._headerDiv.style[this._parent._tabPositionBottom?"top":"bottom"]=c?0:(this._parent._tabInactivePositionAdjustPx+"px");if(c){this._labelDiv.style[this._parent._tabPositionBottom?"paddingTop":"paddingBottom"]=(parseInt(this._labelDiv.style[this._parent._tabPositionBottom?"paddingTop":"paddingBottom"],10)+(this._parent._tabActiveHeightIncreasePx+this._parent._tabInactivePositionAdjustPx))+"px";
}if(!k){if(this._useImageBorder){var i=this._getProperty("ImageBorder",c,l);var f=this._getProperty("BackgroundInsets",c,l);Echo.Sync.FillImageBorder.renderContainer(i,{update:this._fibContainer});Echo.Sync.Insets.renderPosition(f||i.borderInsets,this._backgroundDiv);}else{var d=this._getProperty("Border",c,l)||(c?this._parent._tabActiveBorder:this._parent._tabInactiveBorder);Echo.Sync.Border.render(d,this._labelDiv,this._parent._tabPositionBottom?"borderBottom":"borderTop");Echo.Sync.Border.render(d,this._labelDiv,"borderLeft");Echo.Sync.Border.render(d,this._labelDiv,"borderRight");}}Echo.Sync.Color.renderClear(this._getProperty("Background",c,l),this._backgroundDiv||this._labelDiv,"backgroundColor");Echo.Sync.FillImage.renderClear(this._getProperty("BackgroundImage",c,l),this._backgroundDiv||this._labelDiv,null);if(this._layoutData&&this._layoutData.icon){Echo.Sync.ImageReference.renderImg((c&&this._layoutData.activeIcon)||(l&&this._layoutData.rolloverIcon)||this._layoutData.icon,this._iconImg);
}},_renderState:function(a){if(this._active===a){return;}this._renderHeaderState(a);if(this._active!==null&&!a){Echo.Render.renderComponentHide(this._childComponent);}if(Core.Web.Env.BROWSER_MOZILLA&&!Core.Web.Env.BROWSER_FIREFOX){this._contentDiv.style.right=a?"0":"100%";this._contentDiv.style.bottom=a?"0":"100%";}else{this._contentDiv.style.display=a?"block":"none";}this._active=a;},setRollover:function(a){this._renderHeaderState(this._active,a);this._parent._renderHeaderPositions();}});