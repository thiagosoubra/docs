Extras={uniqueId:0};Extras.Serial={PROPERTY_TYPE_PREFIX:"Extras.Serial."};Extras.Sync={};Extras.Sync.Animation=Core.extend({stepIndex:0,startTime:null,endTime:null,_listenerList:null,_runnable:null,$virtual:{runTime:0,sleepInterval:10},$abstract:{init:function(){},complete:function(a){},step:function(a){}},_doStep:function(){var a=new Date().getTime();if(a<this.endTime){if(this.stepIndex===0){this.init();}else{this.step((a-this.startTime)/this.runTime);}++this.stepIndex;Core.Web.Scheduler.add(this._runnable);}else{this.complete(false);if(this._completeMethod){this._completeMethod(false);}}},abort:function(){Core.Web.Scheduler.remove(this._runnable);this.complete(true);if(this._completeMethod){this._completeMethod(true);}},start:function(a){this._runnable=new Core.Web.Scheduler.MethodRunnable(Core.method(this,this._doStep),this.sleepInterval,false);this.startTime=new Date().getTime();this.endTime=this.startTime+this.runTime;this._completeMethod=a;Core.Web.Scheduler.add(this._runnable);}});
