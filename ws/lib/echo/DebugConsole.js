Echo.DebugConsole={_installed:false,_rendered:false,_titleDiv:null,_contentDiv:null,_div:null,_logging:false,_maximized:false,_mouseMoveRef:null,_mouseDownRef:null,_addControl:function(b,c){var a=document.createElement("span");a.style.cssText="padding:0 8px 0 0;cursor:pointer;";a.appendChild(document.createTextNode("["+b+"]"));this._controlsDiv.appendChild(a);Core.Web.DOM.addEventListener(a,"click",Core.method(this,c),false);},_clearListener:function(a){while(this._contentDiv.firstChild){this._contentDiv.removeChild(this._contentDiv.firstChild);}},_closeListener:function(a){this._div.style.display="none";},_consoleWrite:function(b){if(!this._logging){return;}if(!this._rendered){this._render();}var a=document.createElement("div");a.appendChild(document.createTextNode(b));this._contentDiv.appendChild(a);this._contentDiv.scrollTop=10000000;},_keyListener:function(a){a=a?a:window.event;if(!(a.keyCode==67&&a.ctrlKey&&a.altKey)){return;}this._logging=true;this.setVisible(!this.isVisible());},install:function(){if(this._installed){return;
}Core.Web.DOM.addEventListener(document,"keydown",Core.method(this,this._keyListener),false);Core.Debug.consoleWrite=function(a){Echo.DebugConsole._consoleWrite(a);};if(document.URL.toString().indexOf("?debug")!=-1){this.setVisible(true);this._logging=true;}this._installed=true;},isVisible:function(){if(!this._rendered){return false;}return this._div.style.display=="block";},_maximizeListener:function(c){this._maximized=!this._maximized;this._div.style.top="20px";this._div.style.right="20px";this._div.style.left="";this._div.style.bottom="";if(this._maximized){var a=document.height||600;var b=document.width||600;this._div.style.width=(b-50)+"px";this._div.style.height=(a-50)+"px";this._contentDiv.style.width=(b-72)+"px";this._contentDiv.style.height=(a-85)+"px";}else{this._div.style.width="300px";this._div.style.height="300px";this._contentDiv.style.width="278px";this._contentDiv.style.height="265px";}},_render:function(){var a;this._div=document.createElement("div");this._div.id="__DebugConsole__";
this._div.style.cssText="display:none;position:absolute;top:20px;right:20px;width:300px;height:300px;background-color:#2f2f3f;"+"border:5px solid #3f6fff;overflow:hidden;z-index:32500;";this._titleDiv=document.createElement("div");this._titleDiv.style.cssText="position:relative;"+"margin:1px;height:20px;padding:3px 10px;background-color:#5f5f8f;color:#ffffff;overflow:hidden;cursor:move;";Core.Web.DOM.addEventListener(this._titleDiv,"mousedown",Core.method(this,this._titleMouseDown),false);Core.Web.Event.Selection.disable(this._titleDiv);this._div.appendChild(this._titleDiv);var b=document.createElement("div");b.style.cssText="position:absolute;font-weight:bold;";b.appendChild(document.createTextNode("Debug Console"));this._titleDiv.appendChild(b);this._controlsDiv=document.createElement("div");this._controlsDiv.style.cssText="position:absolute;right:0;background-color:#5f5f8f;";this._titleDiv.appendChild(this._controlsDiv);this._addControl("C",this._clearListener);this._addControl("^",this._maximizeListener);
this._addControl("X",this._closeListener);this._contentDiv=document.createElement("div");this._contentDiv.style.cssText="font-family:monospace;font-size:9px;position:absolute;top:28px;left:1px;"+"width:278px;height:265px;padding:3px 10px;background-color:#1f1f2f;overflow:auto;color:#3fff6f;";this._div.appendChild(this._contentDiv);document.body.appendChild(this._div);this._titleMouseUpRef=Core.method(this,this._titleMouseUp);this._titleMouseMoveRef=Core.method(this,this._titleMouseMove);this._rendered=true;},_titleMouseDown:function(a){this._drag={originX:a.clientX,originY:a.clientY,initialX:this._div.offsetLeft,initialY:this._div.offsetTop};Core.Web.DOM.preventEventDefault(a);Core.Web.DOM.addEventListener(document.body,"mouseup",this._titleMouseUpRef,false);Core.Web.DOM.addEventListener(document.body,"mousemove",this._titleMouseMoveRef,false);},_titleMouseMove:function(a){if(!this._drag){return;}this._div.style.right=this._div.style.bottom="";this._div.style.top=(a.clientY-this._drag.originY+this._drag.initialY)+"px";
this._div.style.left=(a.clientX-this._drag.originX+this._drag.initialX)+"px";},_titleMouseUp:function(a){this._drag=null;Core.Web.DOM.removeEventListener(document.body,"mouseup",this._titleMouseUpRef,false);Core.Web.DOM.removeEventListener(document.body,"mousemove",this._titleMouseMoveRef,false);},setVisible:function(a){if(!this._rendered){this._render();}this._div.style.display=a?"block":"none";}};