Echo={};Echo.Application=Core.extend({$static:{_nextUid:1,generateUid:function(){return this._nextUid++;}},$abstract:true,$virtual:{init:function(){},dispose:function(){},isActive:function(){return true;}},client:null,_idToComponentMap:null,_listenerList:null,_locale:null,_modalComponents:null,_styleSheet:null,_focusedComponent:null,rootComponent:null,updateManager:null,focusManager:null,$construct:function(){this._idToComponentMap=new Core.Arrays.LargeMap();this._listenerList=new Core.ListenerList();this.rootComponent=new Echo.Component();this.rootComponent.componentType="Root";this.rootComponent.register(this);this._modalComponents=[];this.updateManager=new Echo.Update.Manager(this);this.focusManager=new Echo.FocusManager(this);},addListener:function(a,b){this._listenerList.addListener(a,b);},doDispose:function(){this.updateManager.dispose();this.dispose();},doInit:function(){this.init();},_findModalContextRoot:function(a){a=a?a:this.rootComponent;for(var c=a.children.length-1;c>=0;--c){var b=this._findModalContextRoot(a.children[c]);
if(b){return b;}}if(a.modalSupport&&a.get("modal")){return a;}return null;},fireEvent:function(a){if(this._listenerList==null){return;}this._listenerList.fireEvent(a);},focusNext:function(a){var b=this.focusManager.find(null,a);if(b!=null){this.setFocusedComponent(b);}},getComponentByRenderId:function(a){return this._idToComponentMap.map[a];},getFocusedComponent:function(){return this._focusedComponent;},getLayoutDirection:function(){return this._layoutDirection?this._layoutDirection:Echo.LayoutDirection.LTR;},getLocale:function(){return this._locale;},getModalContextRoot:function(){if(this._modalComponents.length===0){return null;}else{if(this._modalComponents.length==1){return this._modalComponents[0];}}return this._findModalContextRoot();},getStyleSheet:function(){return this._styleSheet;},notifyComponentUpdate:function(c,a,b,d,e){if(c.modalSupport&&a=="modal"){this._setModal(c,d);}if(this._listenerList.hasListeners("componentUpdate")){this._listenerList.fireEvent({type:"componentUpdate",parent:c,propertyName:a,oldValue:b,newValue:d});
}if(!e){this.updateManager._processComponentUpdate(c,a,b,d);}},_registerComponent:function(a){if(this._idToComponentMap.map[a.renderId]){throw new Error("Component already exists with id: "+a.renderId);}this._idToComponentMap.map[a.renderId]=a;if(a.modalSupport&&a.get("modal")){this._setModal(a,true);}},removeListener:function(a,b){this._listenerList.removeListener(a,b);},setFocusedComponent:function(c){var a=this._focusedComponent;while(c!=null&&!c.focusable){c=c.parent;}if(this._modalComponents.length>0){var b=this.getModalContextRoot();if(!b.isAncestorOf(c)){return;}}if(this._focusedComponent==c){return;}this._focusedComponent=c;this._listenerList.fireEvent({type:"focus",source:this,oldValue:a,newValue:c});},setLayoutDirection:function(a){this._layoutDirection=a;this.updateManager._processFullRefresh();},setLocale:function(a){this._locale=a;this.updateManager._processFullRefresh();},_setModal:function(a,b){Core.Arrays.remove(this._modalComponents,a);if(b){this._modalComponents.push(a);
}if(this._modalComponents.length>0&&this._focusedComponent){var c=this.getModalContextRoot();if(!c.isAncestorOf(this._focusedComponent)){if(c.focusable){this.setFocusedComponent(c);}else{this.setFocusedComponent(this.focusManager.findInParent(c,false));}}}this.fireEvent({source:this,type:"modal",modal:this._modalComponents.length>0});},setStyleSheet:function(a){this._styleSheet=a;this.updateManager._processFullRefresh();},_unregisterComponent:function(a){this._idToComponentMap.remove(a.renderId);if(a.modalSupport){this._setModal(a,false);}}});Echo.ComponentFactory={_typeToConstructorMap:{},newInstance:function(a,c){var d=this._typeToConstructorMap[a];if(!d){throw new Error("Type not registered with ComponentFactory: "+a);}var b=new d();b.renderId=c;return b;},getConstructor:function(a){return this._typeToConstructorMap[a];},getSuperType:function(a){var b=this._typeToConstructorMap[a];if(!b){return"Component";}if(b.$super){return b.$super.prototype.componentType;}else{return null;}},registerType:function(a,b){if(this._typeToConstructorMap[a]){throw new Error("Type already registered: "+a);
}this._typeToConstructorMap[a]=b;}};Echo.Component=Core.extend({$static:{_nextRenderId:0},$load:function(){Echo.ComponentFactory.registerType("Component",this);},$abstract:true,$virtual:{componentType:"Component",focusable:false,getFocusOrder:null,pane:false},_layoutDirection:null,_locale:null,renderId:null,parent:null,application:null,_listenerList:null,_style:null,_styleName:null,_enabled:true,children:null,focusNextId:null,focusPreviousId:null,_localStyle:null,$construct:function(d){this.children=[];this._localStyle={};if(d){for(var a in d){switch(a){case"style":this._style=d.style;break;case"styleName":this._styleName=d.styleName;break;case"renderId":this.renderId=d.renderId;break;case"children":for(var c=0;c<d.children.length;++c){this.add(d.children[c]);}break;case"events":for(var b in d.events){this.addListener(b,d.events[b]);}break;default:this._localStyle[a]=d[a];}}}},add:function(b,a){if(!(b instanceof Echo.Component)){throw new Error("Cannot add child: specified component object is not derived from Echo.Component. "+"Parent: "+this+", Child: "+b);
}if(!b.componentType){throw new Error("Cannot add child: specified component object does not have a componentType property. "+"Parent: "+this+", Child: "+b);}if(b.parent){b.parent.remove(b);}b.parent=this;if(a==null||a==this.children.length){this.children.push(b);}else{this.children.splice(a,0,b);}if(this.application){b.register(this.application);this.application.notifyComponentUpdate(this,"children",null,b);}if(b._listenerList&&b._listenerList.hasListeners("parent")){b._listenerList.fireEvent({type:"parent",source:b,oldValue:null,newValue:this});}if(this._listenerList&&this._listenerList.hasListeners("children")){this._listenerList.fireEvent({type:"children",source:this,add:b,index:a});}},addListener:function(a,b){if(this._listenerList==null){this._listenerList=new Core.ListenerList();}this._listenerList.addListener(a,b);if(this.application){this.application.notifyComponentUpdate(this,"listeners",null,a);}},fireEvent:function(a){if(this._listenerList==null){return;}this._listenerList.fireEvent(a);
},get:function(a){return this._localStyle[a];},getComponent:function(a){return this.children[a];},getComponentCount:function(){return this.children.length;},getIndex:function(b,a){var c=this._localStyle[b];return c?c[a]:null;},getLayoutDirection:function(){return this._layoutDirection;},getLocale:function(){return this._locale;},getLocalStyleData:function(){return this._localStyle;},getRenderLayoutDirection:function(){var a=this;while(a){if(a._layoutDirection){return a._layoutDirection;}a=a.parent;}if(this.application){return this.application.getLayoutDirection();}return null;},getRenderLocale:function(){var a=this;while(a){if(a._locale){return a._locale;}a=a.parent;}if(this.application){return this.application.getLocale();}return null;},getStyle:function(){return this._style;},getStyleName:function(){return this._styleName;},indexOf:function(a){for(var b=0;b<this.children.length;++b){if(this.children[b]==a){return b;}}return -1;},isActive:function(){if(!this.isRenderEnabled()){return false;
}if(!this.application||!this.application.isActive()){return false;}var a=this.application.getModalContextRoot();if(a!=null&&!a.isAncestorOf(this)){return false;}return true;},isAncestorOf:function(a){while(a!=null&&a!=this){a=a.parent;}return a==this;},isEnabled:function(){return this._enabled;},isRenderEnabled:function(){var a=this;while(a!=null){if(!a._enabled){return false;}a=a.parent;}return true;},register:function(a){if(a&&this.application){throw new Error("Attempt to re-register or change registered application of component.");}var b;if(!a){if(this.children!=null){for(b=0;b<this.children.length;++b){this.children[b].register(false);}}this.application._unregisterComponent(this);if(this.application._focusedComponent==this){this.application.setFocusedComponent(this.parent);}if(this._listenerList!=null&&this._listenerList.hasListeners("dispose")){this._listenerList.fireEvent({type:"dispose",source:this});}}this.application=a;if(a){if(this.renderId==null){this.renderId="CL."+(++Echo.Component._nextRenderId);
}this.application._registerComponent(this);if(this._listenerList!=null&&this._listenerList.hasListeners("init")){this._listenerList.fireEvent({type:"init",source:this});}if(this.children!=null){for(b=0;b<this.children.length;++b){this.children[b].register(a);}}}},render:function(b,a){var d=this._localStyle[b];if(d==null){if(this._style!=null){d=this._style[b];}if(d==null&&this.application&&this.application._styleSheet){var c=this.application._styleSheet.getRenderStyle(this._styleName!=null?this._styleName:"",this.componentType);if(c){d=c[b];}}}return d==null?a:d;},renderIndex:function(c,b,a){var e=this._localStyle[c];var f=e?e[b]:null;if(f==null){if(this._style!=null){e=this._style[c];f=e?e[b]:null;}if(f==null&&this._styleName&&this.application&&this.application._styleSheet){var d=this.application._styleSheet.getRenderStyle(this._styleName!=null?this._styleName:"",this.componentType);if(d){e=d[c];f=e?e[b]:null;}}}return f==null?a:f;},remove:function(c){var b;var a;if(typeof c=="number"){a=c;
b=this.children[a];if(!b){throw new Error("Component.remove(): index out of bounds: "+a+", parent: "+this);}}else{b=c;a=this.indexOf(b);if(a==-1){return;}}if(this.application){b.register(null);}this.children.splice(a,1);b.parent=null;if(this.application){this.application.notifyComponentUpdate(this,"children",b,null);}if(b._listenerList&&b._listenerList.hasListeners("parent")){b._listenerList.fireEvent({type:"parent",source:b,oldValue:this,newValue:null});}if(this._listenerList&&this._listenerList.hasListeners("children")){this._listenerList.fireEvent({type:"children",source:this,remove:b,index:a});}},removeAll:function(){while(this.children.length>0){this.remove(this.children.length-1);}},removeListener:function(a,b){if(this._listenerList==null){return;}this._listenerList.removeListener(a,b);if(this.application){this.application.notifyComponentUpdate(this,"listeners",a,null);}},set:function(b,c,d){var a=this._localStyle[b];if(a===c){return;}this._localStyle[b]=c;if(this._listenerList&&this._listenerList.hasListeners("property")){this._listenerList.fireEvent({type:"property",source:this,propertyName:b,oldValue:a,newValue:c});
}if(this.application){this.application.notifyComponentUpdate(this,b,a,c,d);}},setEnabled:function(b){var a=this._enabled;this._enabled=b;if(this.application){this.application.notifyComponentUpdate(this,"enabled",a,b);}},setIndex:function(c,b,e,f){var d=this._localStyle[c];var a=null;if(d){a=d[b];if(a===e){return;}}else{d=[];this._localStyle[c]=d;}d[b]=e;if(this.application){this.application.notifyComponentUpdate(this,c,a,e,f);}if(this._listenerList&&this._listenerList.hasListeners("property")){this._listenerList.fireEvent({type:"property",source:this,propertyName:c,index:b,oldValue:a,newValue:e});}},setLayoutDirection:function(b){var a=this._layoutDirection;this._layoutDirection=b;if(this.application){this.application.notifyComponentUpdate(this,"layoutDirection",a,b);}},setLocale:function(b){var a=this._locale;this._locale=b;if(this.application){this.application.notifyComponentUpdate(this,"locale",a,b);}},setStyle:function(b){var a=this._style;this._style=b;if(this.application){this.application.notifyComponentUpdate(this,"style",a,b);
}},setStyleName:function(b){var a=this._styleName;this._styleName=b;if(this.application){this.application.notifyComponentUpdate(this,"styleName",a,b);}},toString:function(e){var c=this.renderId+"/"+this.componentType;if(e){c+="\n";var b=this.getComponentCount();c+=this.renderId+"/properties:"+this._localStyle+"\n";for(var d=0;d<b;++d){var a=this.getComponent(d);c+=this.renderId+"/child:"+a.renderId+"\n";c+=a.toString(true);}}return c;}});Echo.FocusManager=Core.extend({_application:null,$construct:function(a){this._application=a;},find:function(h,g){if(!h){h=this._application.getFocusedComponent();if(!h){h=this._application.rootComponent;}}var f=g?h.focusPreviousId:h.focusNextId;if(f){var j=this._application.getComponentByRenderId(f);if(j&&j.isActive()&&j.focusable){return j;}}var b=h;var c={};var a=null;while(true){var d=null;if((g&&h==b)||(a&&a.parent==h)){}else{var e=h.getComponentCount();if(e>0){var i=this._getFocusOrder(h);if(i){d=h.getComponent(i[g?e-1:0]);}else{d=h.getComponent(g?e-1:0);
}if(c[d.renderId]){d=null;}}}if(d==null){if(h.parent){d=this._getNextCandidate(h,g);}}if(d==null){d=h.parent;}if(d==null){return null;}a=h;h=d;c[h.renderId]=true;if(h!=b&&h.isActive()&&h.focusable){return h;}}},findInParent:function(g,d,c){if(!c){c=1;}var h={},e=this._application.getFocusedComponent();if(!e){return null;}h[e.renderId]=true;var f=this._getDescendantIndex(g,e);if(f==-1){return null;}var a=f;var b=e;do{b=this.find(b,d,h);if(b==null||h[b.renderId]){return null;}a=this._getDescendantIndex(g,b);h[b.renderId]=true;}while(Math.abs(a-f)<c&&b!=e);if(b==e){return null;}this._application.setFocusedComponent(b);return b;},_getDescendantIndex:function(b,a){while(a.parent!=b&&a.parent!=null){a=a.parent;}if(a.parent==null){return -1;}return b.indexOf(a);},_getFocusOrder:function(b){var d=b.getFocusOrder?b.getFocusOrder():null;if(!d){return null;}var a=d.slice().sort();for(var c=1;c<a.length;++c){if(a[c-1]>=a[c]){Core.Debug.consoleWrite("Invalid focus order for component "+b+": "+d);return null;
}}return d;},_getNextCandidate:function(c,b){if(!c.parent){return null;}var e=this._getFocusOrder(c.parent);var a,d;if(b){a=c.parent.indexOf(c);if(e){d=Core.Arrays.indexOf(e,a);if(d>0){return c.parent.children[e[d-1]];}}else{if(a>0){return c.parent.getComponent(a-1);}}}else{a=c.parent.indexOf(c);if(e){d=Core.Arrays.indexOf(e,a);if(d<e.length-1){return c.parent.children[e[d+1]];}}else{if(a<c.parent.getComponentCount()-1){return c.parent.getComponent(a+1);}}}}});Echo.LayoutDirection=Core.extend({_ltr:false,$construct:function(a){this._ltr=a;},isLeftToRight:function(){return this._ltr;}});Echo.LayoutDirection.LTR=new Echo.LayoutDirection(true);Echo.LayoutDirection.RTL=new Echo.LayoutDirection(false);Echo.StyleSheet=Core.extend({_nameToStyleMap:null,_renderCache:null,$construct:function(c){this._renderCache={};this._nameToStyleMap={};if(c){for(var b in c){for(var a in c[b]){this.setStyle(b,a,c[b][a]);}}}},getRenderStyle:function(b,a){var d=this._renderCache[b];if(!d){return null;}var c=d[a];
if(c!==undefined){return c;}else{return this._loadRenderStyle(b,a);}},_loadRenderStyle:function(c,b){var e=this._nameToStyleMap[c];if(e==null){this._renderCache[c][b]=null;return null;}var d=e[b];if(d==null){var a=b;while(d==null){a=Echo.ComponentFactory.getSuperType(a);if(a==null){this._renderCache[c][a]=null;return null;}d=e[a];}}this._renderCache[c][b]=d;return d;},getStyle:function(b,a){var c=this._nameToStyleMap[b];if(c==null){return null;}return c[a];},setStyle:function(b,a,c){this._renderCache[b]={};var d=this._nameToStyleMap[b];if(d==null){d={};this._nameToStyleMap[b]=d;}d[a]=c;}});Echo.Update={};Echo.Update.ComponentUpdate=Core.extend({$static:{PropertyUpdate:function(a,b){this.oldValue=a;this.newValue=b;}},_manager:null,parent:null,renderContext:null,_addedChildIds:null,_propertyUpdates:null,_removedChildIds:null,_removedDescendantIds:null,_updatedLayoutDataChildIds:null,_listenerUpdates:null,$construct:function(a,b){this._manager=a;this.parent=b;},_addChild:function(a){if(!this._addedChildIds){this._addedChildIds=[];
}this._addedChildIds.push(a.renderId);this._manager._idMap[a.renderId]=a;},_appendRemovedDescendants:function(b){var a;if(b._removedDescendantIds!=null){if(this._removedDescendantIds==null){this._removedDescendantIds=[];}for(a=0;a<b._removedDescendantIds.length;++a){this._removedDescendantIds.push(b._removedDescendantIds[a]);}}if(b._removedChildIds!=null){if(this._removedDescendantIds==null){this._removedDescendantIds=[];}for(a=0;a<b._removedChildIds.length;++a){this._removedDescendantIds.push(b._removedChildIds[a]);}}if(this._removedDescendantIds!=null){Core.Arrays.removeDuplicates(this._removedDescendantIds);}},getAddedChildren:function(){if(!this._addedChildIds){return null;}var b=[];for(var a=0;a<this._addedChildIds.length;++a){b[a]=this._manager._idMap[this._addedChildIds[a]];}return b;},getRemovedChildren:function(){if(!this._removedChildIds){return null;}var b=[];for(var a=0;a<this._removedChildIds.length;++a){b[a]=this._manager._removedIdMap[this._removedChildIds[a]];}return b;},getRemovedDescendants:function(){if(!this._removedDescendantIds){return null;
}var b=[];for(var a=0;a<this._removedDescendantIds.length;++a){b[a]=this._manager._removedIdMap[this._removedDescendantIds[a]];}return b;},getUpdatedLayoutDataChildren:function(){if(!this._updatedLayoutDataChildIds){return null;}var b=[];for(var a=0;a<this._updatedLayoutDataChildIds.length;++a){b[a]=this._manager._idMap[this._updatedLayoutDataChildIds[a]];}return b;},hasAddedChildren:function(){return this._addedChildIds!=null;},hasRemovedChildren:function(){return this._removedChildIds!=null;},hasUpdatedLayoutDataChildren:function(){return this._updatedLayoutDataChildIds!=null;},hasUpdatedProperties:function(){return this._propertyUpdates!=null;},getUpdatedProperty:function(a){if(this._propertyUpdates==null){return null;}return this._propertyUpdates[a];},isListenerTypeUpdated:function(a){return this._listenerUpdates==null?false:this._listenerUpdates[a];},getUpdatedPropertyNames:function(){if(this._propertyUpdates==null){return[];}var b=[];for(var a in this._propertyUpdates){b.push(a);}return b;
},hasUpdatedPropertyIn:function(b){for(var a in this._propertyUpdates){if(b[a]){return true;}}return false;},isUpdatedPropertySetIn:function(b){for(var a in this._propertyUpdates){if(!b[a]){return false;}}return true;},_removeChild:function(b){this._manager._removedIdMap[b.renderId]=b;if(this._addedChildIds){Core.Arrays.remove(this._addedChildIds,b.renderId);}if(this._updatedLayoutDataChildIds){Core.Arrays.remove(this._updatedLayoutDataChildIds,b.renderId);}if(!this._removedChildIds){this._removedChildIds=[];}this._removedChildIds.push(b.renderId);for(var a=0;a<b.children.length;++a){this._removeDescendant(b.children[a]);}},_removeDescendant:function(b){this._manager._removedIdMap[b.renderId]=b;if(!this._removedDescendantIds){this._removedDescendantIds=[];}this._removedDescendantIds.push(b.renderId);for(var a=0;a<b.children.length;++a){this._removeDescendant(b.children[a]);}},toString:function(){var a="ComponentUpdate\n";a+="- Parent: "+this.parent+"\n";a+="- Adds: "+this._addedChildIds+"\n";
a+="- Removes: "+this._removedChildIds+"\n";a+="- DescendantRemoves: "+this._removedDescendantIds+"\n";a+="- Properties: "+Core.Debug.toString(this._propertyUpdates)+"\n";a+="- LayoutDatas: "+this._updatedLayoutDataChildIds+"\n";return a;},_updateLayoutData:function(a){this._manager._idMap[a.renderId]=a;if(this._updatedLayoutDataChildIds==null){this._updatedLayoutDataChildIds=[];}this._updatedLayoutDataChildIds.push(a.renderId);},_updateListener:function(a){if(this._listenerUpdates==null){this._listenerUpdates={};}this._listenerUpdates[a]=true;},_updateProperty:function(a,b,d){if(this._propertyUpdates==null){this._propertyUpdates={};}var c=new Echo.Update.ComponentUpdate.PropertyUpdate(b,d);this._propertyUpdates[a]=c;}});Echo.Update.Manager=Core.extend({_componentUpdateMap:null,fullRefreshRequired:false,application:null,_hasUpdates:false,_listenerList:null,_idMap:null,_removedIdMap:null,_lastAncestorTestParentId:null,$construct:function(a){this._componentUpdateMap={};this.application=a;
this._listenerList=new Core.ListenerList();this._idMap={};this._removedIdMap={};},addUpdateListener:function(a){this._listenerList.addListener("update",a);},_createComponentUpdate:function(a){this._hasUpdates=true;var b=this._componentUpdateMap[a.renderId];if(!b){b=new Echo.Update.ComponentUpdate(this,a);this._componentUpdateMap[a.renderId]=b;}return b;},dispose:function(){this.application=null;},_fireUpdate:function(){if(!this._listenerList.isEmpty()){this._listenerList.fireEvent({type:"update",source:this});}},getUpdates:function(){var b=[];for(var a in this._componentUpdateMap){b.push(this._componentUpdateMap[a]);}return b;},hasUpdates:function(){return this._hasUpdates;},_isAncestorBeingAdded:function(a){var f=a;var d=a.parent;var c=d?d.renderId:null;if(c&&this._lastAncestorTestParentId==c){return false;}while(d){var e=this._componentUpdateMap[d.renderId];if(e&&e._addedChildIds){for(var b=0;b<e._addedChildIds.length;++b){if(e._addedChildIds[b]==f.renderId){return true;}}}f=d;d=d.parent;
}this._lastAncestorTestParentId=c;return false;},_processComponentAdd:function(a,c){if(this.fullRefreshRequired){return;}if(this._isAncestorBeingAdded(c)){return;}var b=this._createComponentUpdate(a);b._addChild(c);},_processComponentLayoutDataUpdate:function(a){if(this.fullRefreshRequired){return;}var b=a.parent;if(b==null||this._isAncestorBeingAdded(b)){return;}var c=this._createComponentUpdate(b);c._updateLayoutData(a);},_processComponentListenerUpdate:function(a,b){if(this.fullRefreshRequired){return;}if(this._isAncestorBeingAdded(a)){return;}var c=this._createComponentUpdate(a);c._updateListener(b);},_processComponentRemove:function(d,g){if(this.fullRefreshRequired){return;}if(this._isAncestorBeingAdded(d)){return;}var f=this._createComponentUpdate(d);f._removeChild(g);var b=null;for(var a in this._componentUpdateMap){var e=this._componentUpdateMap[a];if(g.isAncestorOf(e.parent)){f._appendRemovedDescendants(e);if(b==null){b=[];}b.push(a);}}if(b!=null){for(var c=0;c<b.length;++c){delete this._componentUpdateMap[b[c]];
}}},_processComponentPropertyUpdate:function(c,a,b,d){if(this.fullRefreshRequired){return;}if(this._isAncestorBeingAdded(c)){return;}var e=this._createComponentUpdate(c);e._updateProperty(a,b,d);},_processFullRefresh:function(){for(var a=0;a<this.application.rootComponent.children.length;++a){this._processComponentRemove(this.application.rootComponent,this.application.rootComponent.children[a]);}this.fullRefreshRequired=true;var b=this._createComponentUpdate(this.application.rootComponent);b.fullRefresh=true;this._fireUpdate();},_processComponentUpdate:function(c,a,b,d){if(a=="children"){if(d==null){this._processComponentRemove(c,b);}else{this._processComponentAdd(c,d);}}else{if(a=="layoutData"){this._processComponentLayoutDataUpdate(c);}else{if(a=="listeners"){this._processComponentListenerUpdate(c,b||d);}else{this._processComponentPropertyUpdate(c,a,b,d);}}}this._fireUpdate();},purge:function(){this.fullRefreshRequired=false;this._componentUpdateMap={};this._idMap={};this._removedIdMap={};
this._hasUpdates=false;this._lastAncestorTestParentId=null;},removeUpdateListener:function(a){this._listenerList.removeListener("update",a);},toString:function(){var b="[ UpdateManager ]\n";if(this.fullRefreshRequired){b+="fullRefresh";}else{for(var a in this._componentUpdateMap){b+=this._componentUpdateMap[a];}}return b;}});Echo.AbstractButton=Core.extend(Echo.Component,{$abstract:true,$load:function(){Echo.ComponentFactory.registerType("AbstractButton",this);Echo.ComponentFactory.registerType("AB",this);},componentType:"AbstractButton",focusable:true,$virtual:{doAction:function(){this.fireEvent({type:"action",source:this,actionCommand:this.get("actionCommand")});}}});Echo.Button=Core.extend(Echo.AbstractButton,{$load:function(){Echo.ComponentFactory.registerType("Button",this);Echo.ComponentFactory.registerType("B",this);},componentType:"Button"});Echo.ToggleButton=Core.extend(Echo.AbstractButton,{$load:function(){Echo.ComponentFactory.registerType("ToggleButton",this);Echo.ComponentFactory.registerType("TB",this);
},$abstract:true,componentType:"ToggleButton"});Echo.CheckBox=Core.extend(Echo.ToggleButton,{$load:function(){Echo.ComponentFactory.registerType("CheckBox",this);Echo.ComponentFactory.registerType("CB",this);},componentType:"CheckBox"});Echo.RadioButton=Core.extend(Echo.ToggleButton,{$load:function(){Echo.ComponentFactory.registerType("RadioButton",this);Echo.ComponentFactory.registerType("RB",this);},componentType:"RadioButton"});Echo.AbstractListComponent=Core.extend(Echo.Component,{$abstract:true,$load:function(){Echo.ComponentFactory.registerType("AbstractListComponent",this);Echo.ComponentFactory.registerType("LC",this);},componentType:"AbstractListComponent",focusable:true,$virtual:{doAction:function(){this.fireEvent({type:"action",source:this,actionCommand:this.get("actionCommand")});}}});Echo.ListBox=Core.extend(Echo.AbstractListComponent,{$static:{SINGLE_SELECTION:0,MULTIPLE_SELECTION:2},$load:function(){Echo.ComponentFactory.registerType("ListBox",this);Echo.ComponentFactory.registerType("LB",this);
},componentType:"ListBox"});Echo.SelectField=Core.extend(Echo.AbstractListComponent,{$load:function(){Echo.ComponentFactory.registerType("SelectField",this);Echo.ComponentFactory.registerType("SF",this);},componentType:"SelectField"});Echo.Column=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("Column",this);Echo.ComponentFactory.registerType("C",this);},componentType:"Column"});Echo.Composite=Core.extend(Echo.Component,{$abstract:true,$load:function(){Echo.ComponentFactory.registerType("Composite",this);Echo.ComponentFactory.registerType("CM",this);},componentType:"Composite"});Echo.Panel=Core.extend(Echo.Composite,{$load:function(){Echo.ComponentFactory.registerType("Panel",this);Echo.ComponentFactory.registerType("P",this);},componentType:"Panel"});Echo.ContentPane=Core.extend(Echo.Component,{$static:{OVERFLOW_AUTO:0,OVERFLOW_HIDDEN:1,OVERFLOW_SCROLL:2},$load:function(){Echo.ComponentFactory.registerType("ContentPane",this);Echo.ComponentFactory.registerType("CP",this);
},componentType:"ContentPane",pane:true});Echo.Grid=Core.extend(Echo.Component,{$static:{ORIENTATION_HORIZONTAL:0,ORIENTATION_VERTICAL:1,SPAN_FILL:-1},$load:function(){Echo.ComponentFactory.registerType("Grid",this);Echo.ComponentFactory.registerType("G",this);},componentType:"Grid"});Echo.Label=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("Label",this);Echo.ComponentFactory.registerType("L",this);},componentType:"Label"});Echo.Row=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("Row",this);Echo.ComponentFactory.registerType("R",this);},componentType:"Row"});Echo.SplitPane=Core.extend(Echo.Component,{$static:{ORIENTATION_HORIZONTAL_LEADING_TRAILING:0,ORIENTATION_HORIZONTAL_TRAILING_LEADING:1,ORIENTATION_HORIZONTAL_LEFT_RIGHT:2,ORIENTATION_HORIZONTAL_RIGHT_LEFT:3,ORIENTATION_VERTICAL_TOP_BOTTOM:4,ORIENTATION_VERTICAL_BOTTOM_TOP:5,DEFAULT_SEPARATOR_POSITION:"50%",DEFAULT_SEPARATOR_SIZE_FIXED:0,DEFAULT_SEPARATOR_SIZE_RESIZABLE:4,DEFAULT_SEPARATOR_COLOR:"#3f3f4f",OVERFLOW_AUTO:0,OVERFLOW_HIDDEN:1,OVERFLOW_SCROLL:2},$load:function(){Echo.ComponentFactory.registerType("SplitPane",this);
Echo.ComponentFactory.registerType("SP",this);},componentType:"SplitPane",pane:true,getFocusOrder:function(){if(this.children.length<2){return null;}switch(this.render("orientation")){case Echo.SplitPane.ORIENTATION_VERTICAL_BOTTOM_TOP:case Echo.SplitPane.ORIENTATION_HORIZONTAL_TRAILING_LEADING:return[1,0];case Echo.SplitPane.ORIENTATION_HORIZONTAL_LEFT_RIGHT:return this.getRenderLayoutDirection().isLeftToRight()?null:[1,0];case Echo.SplitPane.ORIENTATION_HORIZONTAL_RIGHT_LEFT:return this.getRenderLayoutDirection().isLeftToRight()?[1,0]:null;default:return null;}}});Echo.TextComponent=Core.extend(Echo.Component,{$abstract:true,$load:function(){Echo.ComponentFactory.registerType("TextComponent",this);Echo.ComponentFactory.registerType("TC",this);},$virtual:{doAction:function(){this.fireEvent({type:"action",source:this,actionCommand:this.get("actionCommand")});},doKeyDown:function(b){var a={type:"keyDown",source:this,keyCode:b};this.fireEvent(a);return !a.veto;},doKeyPress:function(c,a){var b={type:"keyPress",source:this,keyCode:c,charCode:a};
this.fireEvent(b);return !b.veto;}},componentType:"TextComponent",focusable:true});Echo.TextArea=Core.extend(Echo.TextComponent,{$load:function(){Echo.ComponentFactory.registerType("TextArea",this);Echo.ComponentFactory.registerType("TA",this);},componentType:"TextArea"});Echo.TextField=Core.extend(Echo.TextComponent,{$load:function(){Echo.ComponentFactory.registerType("TextField",this);Echo.ComponentFactory.registerType("TF",this);},componentType:"TextField"});Echo.PasswordField=Core.extend(Echo.TextField,{$load:function(){Echo.ComponentFactory.registerType("PasswordField",this);Echo.ComponentFactory.registerType("PF",this);},componentType:"PasswordField"});Echo.WindowPane=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("WindowPane",this);Echo.ComponentFactory.registerType("WP",this);},$static:{DEFAULT_RESOURCE_TIMEOUT:300,DEFAULT_BORDER:{color:"#36537a",borderInsets:20,contentInsets:3},DEFAULT_BACKGROUND:"#ffffff",DEFAULT_FOREGROUND:"#000000",DEFAULT_CONTROLS_INSETS:4,DEFAULT_CONTROLS_SPACING:4,DEFAULT_HEIGHT:"15em",DEFAULT_MINIMUM_WIDTH:100,DEFAULT_MINIMUM_HEIGHT:100,DEFAULT_TITLE_BACKGROUND:"#becafe",DEFAULT_TITLE_HEIGHT:30,DEFAULT_TITLE_INSETS:"5px 10px",DEFAULT_WIDTH:"30em"},componentType:"WindowPane",modalSupport:true,floatingPane:true,pane:true,focusable:true,_preMaximizedState:null,userClose:function(){this.fireEvent({type:"close",source:this});
},userMaximize:function(){if(this.render("width")=="100%"&&this.render("height")=="100%"){if(this._preMaximizedState){this.set("width",this._preMaximizedState.width);this.set("height",this._preMaximizedState.height);this.set("positionX",this._preMaximizedState.x);this.set("positionY",this._preMaximizedState.y);}}else{this._preMaximizedState={x:this.get("positionX"),y:this.get("positionY"),width:this.get("width"),height:this.get("height")};this.set("width","100%");this.set("height","100%");}this.fireEvent({type:"maximize",source:this});},userMinimize:function(){this.fireEvent({type:"minimize",source:this});}});