Echo.Sync.ArrayContainer=Core.extend(Echo.Render.ComponentSync,{$abstract:{cellElementNodeName:null,renderChildLayoutData:function(b,a){}},$virtual:{prevFocusKey:null,prevFocusFlag:null,nextFocusKey:null,nextFocusFlag:null,invertFocusRtl:false},element:null,containerElement:null,spacingPrototype:null,cellSpacing:null,_childIdToElementMap:null,clientKeyDown:function(f){switch(f.keyCode){case this.prevFocusKey:case this.nextFocusKey:var a=f.keyCode==this.prevFocusKey;if(this.invertFocusRtl&&!this.component.getRenderLayoutDirection().isLeftToRight()){a=!a;}var c=this.client.application.getFocusedComponent();if(c&&c.peer&&c.peer.getFocusFlags){var d=c.peer.getFocusFlags();if((a&&d&this.prevFocusFlag)||(!a&&d&this.nextFocusFlag)){var b=this.client.application.focusManager.findInParent(this.component,a);if(b){this.client.application.setFocusedComponent(b);Core.Web.DOM.preventEventDefault(f.domEvent);return false;}}}break;}return true;},_renderAddChild:function(g,f,b){var a=document.createElement(this.cellElementNodeName);
this._childIdToElementMap[f.renderId]=a;Echo.Render.renderComponentAdd(g,f,a);this.renderChildLayoutData(f,a);if(b!=null){var d;if(this.containerElement.childNodes.length>=3&&this.cellSpacing){d=(this.containerElement.childNodes.length+1)/2;}else{d=this.containerElement.childNodes.length;}if(b==d){b=null;}}if(b==null||!this.containerElement.firstChild){if(this.cellSpacing&&this.containerElement.firstChild){this.containerElement.appendChild(this.spacingPrototype.cloneNode(false));}this.containerElement.appendChild(a);}else{var e=this.cellSpacing?b*2:b;var c=this.containerElement.childNodes[e];this.containerElement.insertBefore(a,c);if(this.cellSpacing){this.containerElement.insertBefore(this.spacingPrototype.cloneNode(false),c);}}},renderAddChildren:function(d){this._childIdToElementMap={};var a=this.component.getComponentCount();for(var b=0;b<a;++b){var c=this.component.getComponent(b);this._renderAddChild(d,c);}},renderDispose:function(a){this.element=null;this.containerElement=null;this._childIdToElementMap=null;
this.spacingPrototype=null;},_renderRemoveChild:function(c,b){var a=this._childIdToElementMap[b.renderId];if(!a){return;}if(this.cellSpacing){if(a.previousSibling){this.containerElement.removeChild(a.previousSibling);}else{if(a.nextSibling){this.containerElement.removeChild(a.nextSibling);}}}this.containerElement.removeChild(a);delete this._childIdToElementMap[b.renderId];},renderUpdate:function(g){var c,d=false;if(g.hasUpdatedProperties()||g.hasUpdatedLayoutDataChildren()){d=true;}else{var a=g.getRemovedChildren();if(a){for(c=0;c<a.length;++c){this._renderRemoveChild(g,a[c]);}}var e=g.getAddedChildren();if(e){for(c=0;c<e.length;++c){this._renderAddChild(g,e[c],this.component.indexOf(e[c]));}}}if(d){var b=this.element;var f=b.parentNode;Echo.Render.renderComponentDispose(g,g.parent);f.removeChild(b);this.renderAdd(g,f);}return d;}});Echo.Sync.Column=Core.extend(Echo.Sync.ArrayContainer,{$load:function(){Echo.Render.registerPeer("Column",this);},cellElementNodeName:"div",prevFocusKey:38,prevFocusFlag:Echo.Render.ComponentSync.FOCUS_PERMIT_ARROW_UP,nextFocusKey:40,nextFocusFlag:Echo.Render.ComponentSync.FOCUS_PERMIT_ARROW_DOWN,renderAdd:function(b,a){this.element=this.containerElement=document.createElement("div");
this.element.id=this.component.renderId;this.element.style.outlineStyle="none";this.element.tabIndex="-1";Echo.Sync.renderComponentDefaults(this.component,this.element);Echo.Sync.Border.render(this.component.render("border"),this.element);Echo.Sync.Insets.render(this.component.render("insets"),this.element,"padding");this.cellSpacing=Echo.Sync.Extent.toPixels(this.component.render("cellSpacing"),false);if(this.cellSpacing){this.spacingPrototype=document.createElement("div");this.spacingPrototype.style.height=this.cellSpacing+"px";this.spacingPrototype.style.fontSize="1px";this.spacingPrototype.style.lineHeight="0";}this.renderAddChildren(b);a.appendChild(this.element);},renderChildLayoutData:function(c,a){var b=c.render("layoutData");if(b){Echo.Sync.Color.render(b.background,a,"backgroundColor");Echo.Sync.FillImage.render(b.backgroundImage,a);Echo.Sync.Insets.render(b.insets,a,"padding");Echo.Sync.Alignment.render(b.alignment,a,true,this.component);if(b.height){a.style.height=Echo.Sync.Extent.toPixels(b.height,false)+"px";
}}}});Echo.Sync.Row=Core.extend(Echo.Sync.ArrayContainer,{$static:{_createRowPrototype:function(){var c=document.createElement("div");c.style.outlineStyle="none";c.tabIndex="-1";var b=document.createElement("table");b.style.borderCollapse="collapse";c.appendChild(b);var a=document.createElement("tbody");b.appendChild(a);a.appendChild(document.createElement("tr"));return c;},_rowPrototype:null},$load:function(){this._rowPrototype=this._createRowPrototype();Echo.Render.registerPeer("Row",this);},cellElementNodeName:"td",prevFocusKey:37,prevFocusFlag:Echo.Render.ComponentSync.FOCUS_PERMIT_ARROW_LEFT,nextFocusKey:39,nextFocusFlag:Echo.Render.ComponentSync.FOCUS_PERMIT_ARROW_RIGHT,invertFocusRtl:true,renderAdd:function(b,a){this.element=Echo.Sync.Row._rowPrototype.cloneNode(true);this.element.id=this.component.renderId;Echo.Sync.renderComponentDefaults(this.component,this.element);Echo.Sync.Border.render(this.component.render("border"),this.element);Echo.Sync.Insets.render(this.component.render("insets"),this.element,"padding");
Echo.Sync.Alignment.render(this.component.render("alignment"),this.element,true,this.component);this.containerElement=this.element.firstChild.firstChild.firstChild;this.cellSpacing=Echo.Sync.Extent.toPixels(this.component.render("cellSpacing"),false);if(this.cellSpacing){this.spacingPrototype=document.createElement("td");this.spacingPrototype.style.padding=0;this.spacingPrototype.style.width=this.cellSpacing+"px";}this.renderAddChildren(b);a.appendChild(this.element);},renderChildLayoutData:function(d,b){var c=d.render("layoutData");var a;if(c){a=c.insets;Echo.Sync.Color.render(c.background,b,"backgroundColor");Echo.Sync.FillImage.render(c.backgroundImage,b);Echo.Sync.Alignment.render(c.alignment,b,true,this.component);if(c.width){if(Echo.Sync.Extent.isPercent(c.width)){b.style.width=c.width;if(this.element.firstChild.style.width!="100%"){this.element.firstChild.style.width="100%";}}else{b.style.width=Echo.Sync.Extent.toPixels(c.width,true)+"px";}}}if(!a){a=0;}Echo.Sync.Insets.render(a,b,"padding");
}});