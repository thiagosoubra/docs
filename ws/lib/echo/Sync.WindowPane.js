Echo.Sync.WindowPane=Core.extend(Echo.Render.ComponentSync,{$static:{CURSORS:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],PARTIAL_PROPERTIES:{background:true,backgroundImage:true,border:true,closable:true,closeIcon:true,closeIconInsets:true,controlsInsets:true,font:true,foreground:true,height:true,icon:true,iconInsets:true,insets:true,maximizeEnabled:true,maximizeIcon:true,maximumHeight:true,maximumWidth:true,minimizeEnabled:true,minimizeIcon:true,minimumHeight:true,minimumWidth:true,movable:true,positionX:true,positionY:true,resizable:true,title:true,titleBackground:true,titleBackgroundImage:true,titleFont:true,titleForeground:true,titleHeight:true,titleInsets:true,width:true},NON_RENDERED_PROPERTIES:{zIndex:true},PARTIAL_PROPERTIES_POSITION_SIZE:{positionX:true,positionY:true,width:true,height:true},FadeRunnable:Core.extend(Core.Web.Scheduler.Runnable,{timeInterval:20,repeat:true,_directionOut:false,_div:null,_completeMethod:null,_time:null,$construct:function(d,c,a,b){this._directionOut=c;
this._div=d;this._completeMethod=b;this._time=a;},run:function(){if(!this._startTime){this._startTime=new Date().getTime();}var a=(new Date().getTime()-this._startTime)/this._time;if(a>1){a=1;}this._div.style.opacity=this._directionOut?1-a:a;if(a===1){this.repeat=false;if(this._completeMethod){this._completeMethod();this._completeMethod=null;}}}})},$load:function(){Echo.Render.registerPeer("WindowPane",this);},_initialRenderDisplayComplete:false,_displayed:false,_requested:null,_rendered:null,_dragInit:null,_dragOrigin:null,_resizeIncrement:null,_containerSize:null,_processBorderMouseMoveRef:null,_processBorderMouseUpRef:null,_processTitleBarMouseMoveRef:null,_processTitleBarMouseUpRef:null,_controlIcons:null,_overlay:null,_closeAnimationTime:null,_opening:false,_imageWaitStartTime:null,$construct:function(){this._processBorderMouseMoveRef=Core.method(this,this._processBorderMouseMove);this._processBorderMouseUpRef=Core.method(this,this._processBorderMouseUp);this._processTitleBarMouseMoveRef=Core.method(this,this._processTitleBarMouseMove);
this._processTitleBarMouseUpRef=Core.method(this,this._processTitleBarMouseUp);},_centerIcon:function(){if(!this._titleIconImg||!this._titleIconImg.complete||!this._titleIconImg.height){return;}var b=Echo.Sync.Insets.toPixels(this.component.render("iconInsets"));var a=parseInt(this._titleBarDiv.style.height,10)-b.top-b.bottom-this._titleIconImg.height;if(a<=0){return;}this._titleIconDiv.style.paddingTop=Math.floor(a/2)+"px";},_imageLoadListener:function(a){if(!this.component){return;}if(this._titleIconImgLoading&&this._titleIconImg.complete){this._titleIconImgLoading=false;this._titleBarDiv.style.height="";this._titleBarHeight=new Core.Web.Measure.Bounds(this._titleBarDiv).height||Echo.Sync.Extent.toPixels(Echo.WindowPane.DEFAULT_TITLE_HEIGHT);this._titleBarDiv.style.height=this._titleBarHeight+"px";this._contentDiv.style.top=(this._contentInsets.top+this._titleBarHeight)+"px";}if(a.complete){this._imageWaitStartTime=null;}Echo.Render.renderComponentDisplay(this.component);},_loadPositionAndSize:function(){this._requested={x:this.component.render("positionX","50%"),y:this.component.render("positionY","50%"),contentWidth:this.component.render("contentWidth"),contentHeight:this.component.render("contentHeight")};
this._requested.width=this.component.render("width",this._requested.contentWidth?null:Echo.WindowPane.DEFAULT_WIDTH);this._requested.height=this.component.render("height");},_loadContainerSize:function(){this._containerSize=this.component.parent.peer.getSize();},_overlayAdd:function(){if(this._overlay){return;}this._overlay=document.createElement("div");this._overlay.style.cssText="position:absolute;z-index:32600;width:100%;height:100%;";Echo.Sync.FillImage.render(this.client.getResourceUrl("Echo","resource/Transparent.gif"),this._overlay);document.body.appendChild(this._overlay);},_overlayRemove:function(){if(!this._overlay){return;}document.body.removeChild(this._overlay);this._overlay=null;},_processBorderMouseDown:function(a){if(!this.client||!this.client.verifyInput(this.component)){return true;}Core.Web.dragInProgress=true;Core.Web.DOM.preventEventDefault(a);this._overlayAdd();this._loadContainerSize();this._dragInit={x:this._rendered.x,y:this._rendered.y,width:this._rendered.width,height:this._rendered.height};
this._dragOrigin={x:a.clientX,y:a.clientY};switch(a.target){case this._borderDivs[0]:this._resizeIncrement={x:0,y:-1};break;case this._borderDivs[1]:this._resizeIncrement={x:1,y:-1};break;case this._borderDivs[2]:this._resizeIncrement={x:1,y:0};break;case this._borderDivs[3]:this._resizeIncrement={x:1,y:1};break;case this._borderDivs[4]:this._resizeIncrement={x:0,y:1};break;case this._borderDivs[5]:this._resizeIncrement={x:-1,y:1};break;case this._borderDivs[6]:this._resizeIncrement={x:-1,y:0};break;case this._borderDivs[7]:this._resizeIncrement={x:-1,y:-1};break;}Core.Web.Event.add(document.body,"mousemove",this._processBorderMouseMoveRef,true);Core.Web.Event.add(document.body,"mouseup",this._processBorderMouseUpRef,true);},_processBorderMouseMove:function(a){this._setBounds({x:this._resizeIncrement.x==-1?this._dragInit.x+a.clientX-this._dragOrigin.x:null,y:this._resizeIncrement.y==-1?this._dragInit.y+a.clientY-this._dragOrigin.y:null,width:this._dragInit.width+(this._resizeIncrement.x*(a.clientX-this._dragOrigin.x)),height:this._dragInit.height+(this._resizeIncrement.y*(a.clientY-this._dragOrigin.y))},true);
Echo.Sync.FillImageBorder.renderContainerDisplay(this._div);},_processBorderMouseUp:function(a){Core.Web.DOM.preventEventDefault(a);Core.Web.dragInProgress=false;this._overlayRemove();this._removeBorderListeners();this.component.set("positionX",this._rendered.x);this.component.set("positionY",this._rendered.y);this.component.set("width",this._rendered.width);this.component.set("height",this._rendered.height);this._requested={x:this._rendered.x,y:this._rendered.y,width:this._rendered.width,height:this._rendered.height};Echo.Sync.FillImageBorder.renderContainerDisplay(this._div);Core.Web.VirtualPosition.redraw(this._contentDiv);Core.Web.VirtualPosition.redraw(this._maskDiv);Echo.Render.notifyResize(this.component);},_processControlClick:function(a){if(!this.client||!this.client.verifyInput(this.component)){return true;}switch(a.registeredTarget._controlData.name){case"close":this.component.userClose();break;case"maximize":this.component.userMaximize();Echo.Render.processUpdates(this.client);
break;case"minimize":this.component.userMinimize();break;}},_processControlRolloverEnter:function(a){if(!this.client||!this.client.verifyInput(this.component)){return true;}Echo.Sync.ImageReference.renderImg(a.registeredTarget._controlData.rolloverIcon,a.registeredTarget.firstChild);},_processControlRolloverExit:function(a){Echo.Sync.ImageReference.renderImg(a.registeredTarget._controlData.icon,a.registeredTarget.firstChild);},renderContentPaneRemove:function(a,b){if(this._closeAnimationTime>0){Core.Web.Scheduler.add(new Echo.Sync.WindowPane.FadeRunnable(a,true,this._closeAnimationTime,b));return true;}else{return false;}},clientKeyDown:function(a){if(a.keyCode==27){if(this.component.render("closable",true)){this.component.userClose();Core.Web.DOM.preventEventDefault(a.domEvent);return false;}}return true;},_processFocusClick:function(a){if(!this.client||!this.client.verifyInput(this.component)){return true;}this.component.parent.peer.raise(this.component);return true;},_processTitleBarMouseDown:function(b){if(!this.client||!this.client.verifyInput(this.component)){return true;
}var a=b.target;while(a!=b.registeredTarget){if(a._controlData){return;}a=a.parentNode;}this.component.parent.peer.raise(this.component);Core.Web.dragInProgress=true;Core.Web.DOM.preventEventDefault(b);this._overlayAdd();this._loadContainerSize();this._dragInit={x:this._rendered.x,y:this._rendered.y};this._dragOrigin={x:b.clientX,y:b.clientY};Core.Web.Event.add(document.body,"mousemove",this._processTitleBarMouseMoveRef,true);Core.Web.Event.add(document.body,"mouseup",this._processTitleBarMouseUpRef,true);},_processTitleBarMouseMove:function(a){this._setBounds({x:this._dragInit.x+a.clientX-this._dragOrigin.x,y:this._dragInit.y+a.clientY-this._dragOrigin.y},true);},_processTitleBarMouseUp:function(a){Core.Web.dragInProgress=false;this._overlayRemove();this._removeTitleBarListeners();this.component.set("positionX",this._rendered.x);this.component.set("positionY",this._rendered.y);this._requested.x=this._rendered.x;this._requested.y=this._rendered.y;},_redraw:function(){if(this._rendered.width<=0||this._rendered.height<=0){return;
}var b=this._rendered.width-this._borderInsets.left-this._borderInsets.right;var a=this._rendered.height-this._borderInsets.top-this._borderInsets.bottom;this._div.style.left=this._rendered.x+"px";this._div.style.top=this._rendered.y+"px";this._div.style.width=this._rendered.width+"px";this._div.style.height=this._rendered.height+"px";this._titleBarDiv.style.width=(this._rendered.width-this._contentInsets.left-this._contentInsets.right)+"px";Echo.Sync.FillImageBorder.renderContainerDisplay(this._div);Core.Web.VirtualPosition.redraw(this._contentDiv);Core.Web.VirtualPosition.redraw(this._maskDiv);},_removeBorderListeners:function(){Core.Web.Event.remove(document.body,"mousemove",this._processBorderMouseMoveRef,true);Core.Web.Event.remove(document.body,"mouseup",this._processBorderMouseUpRef,true);},_removeTitleBarListeners:function(){Core.Web.Event.remove(document.body,"mousemove",this._processTitleBarMouseMoveRef,true);Core.Web.Event.remove(document.body,"mouseup",this._processTitleBarMouseUpRef,true);
},renderAdd:function(d,b){this._opening=d.parent==this.component.parent;this._rtl=!this.component.getRenderLayoutDirection().isLeftToRight();this._closeAnimationTime=Core.Web.Env.NOT_SUPPORTED_CSS_OPACITY?0:this.component.render("closeAnimationTime",0);this._contentDiv=document.createElement("div");var c=this.component.getComponentCount();if(c==1){Echo.Render.renderComponentAdd(d,this.component.getComponent(0),this._contentDiv);}else{if(c>1){throw new Error("Too many children: "+c);}}if(Core.Web.Env.QUIRK_IE_SELECT_Z_INDEX){this._maskDiv=document.createElement("div");this._maskDiv.style.cssText="filter:alpha(opacity=0);z-index:1;position:absolute;left:0,right:0,top:0,bottom:0,borderWidth:0;";var a=document.createElement("iframe");a.style.cssText="width:100%;height:100%;";a.src=this.client.getResourceUrl("Echo","resource/Blank.html");this._maskDiv.appendChild(a);}Echo.Sync.LayoutDirection.render(this.component.getLayoutDirection(),this._div);this._renderAddFrame(b);},_renderAddFrame:function(f){this._initialRenderDisplayComplete=false;
this._loadPositionAndSize();this._minimumWidth=Echo.Sync.Extent.toPixels(this.component.render("minimumWidth",Echo.WindowPane.DEFAULT_MINIMUM_WIDTH),true);this._minimumHeight=Echo.Sync.Extent.toPixels(this.component.render("minimumHeight",Echo.WindowPane.DEFAULT_MINIMUM_HEIGHT),false);this._maximumWidth=Echo.Sync.Extent.toPixels(this.component.render("maximumWidth"),true);this._maximumHeight=Echo.Sync.Extent.toPixels(this.component.render("maximumHeight"),false);this._resizable=this.component.render("resizable",true);var o=this.component.render("border",Echo.WindowPane.DEFAULT_BORDER);this._borderInsets=Echo.Sync.Insets.toPixels(o.borderInsets);this._contentInsets=Echo.Sync.Insets.toPixels(o.contentInsets);var e=this.component.render("movable",true);var g=this.component.render("closable",true);var h=this.component.render("maximizeEnabled",false);var c=this.component.render("minimizeEnabled",false);var d=g||h||c;var b=this.component.render("ieAlphaRenderBorder")?Echo.Sync.FillImage.FLAG_ENABLE_IE_PNG_ALPHA_FILTER:0;
this._div=Echo.Sync.FillImageBorder.renderContainer(o,{absolute:true});this._div.id=this.component.renderId;this._div.tabIndex="0";this._div.style.outlineStyle="none";this._div.style.overflow="hidden";this._div.style.zIndex=1;if(!this._displayed){this._div.style.visibility="hidden";}this._borderDivs=Echo.Sync.FillImageBorder.getBorder(this._div);var a=this._resizable?Core.method(this,this._processBorderMouseDown):null;for(var q=0;q<8;++q){if(this._borderDivs[q]){if(this._resizable){this._borderDivs[q].style.zIndex=2;this._borderDivs[q].style.cursor=Echo.Sync.WindowPane.CURSORS[q];Core.Web.Event.add(this._borderDivs[q],"mousedown",a,true);}}}var l=this.component.render("titleInsets",Echo.WindowPane.DEFAULT_TITLE_INSETS);this._titleBarDiv=document.createElement("div");this._titleBarDiv.style.position="absolute";this._titleBarDiv.style.zIndex=3;var r=this.component.render("icon");if(r){this._titleIconDiv=document.createElement("div");this._titleIconDiv.style[Core.Web.Env.CSS_FLOAT]=this._rtl?"right":"left";
var m=this.component.render("iconInsets");if(m){Echo.Sync.Insets.render(m,this._titleIconDiv,"padding");}else{var s=Echo.Sync.Insets.toPixels(l);if(this._rtl){this._titleIconDiv.style.paddingRight=s.right+"px";}else{this._titleIconDiv.style.paddingLeft=s.left+"px";}}this._titleBarDiv.appendChild(this._titleIconDiv);this._titleIconImg=document.createElement("img");Echo.Sync.ImageReference.renderImg(r,this._titleIconImg);this._titleIconDiv.appendChild(this._titleIconImg);this._titleIconImgLoading=true;}var t=this.component.render("title");var j=document.createElement("div");if(r){j.style[Core.Web.Env.CSS_FLOAT]=this._rtl?"right":"left";}j.style.whiteSpace="nowrap";Echo.Sync.Font.render(this.component.render("titleFont"),j);Echo.Sync.Insets.render(l,j,"padding");j.appendChild(document.createTextNode(t?t:"\u00a0"));this._titleBarDiv.appendChild(j);var n=this.component.render("titleHeight");if(n){this._titleBarHeight=Echo.Sync.Extent.toPixels(n);}if(!n){this._titleBarHeight=new Core.Web.Measure.Bounds(this._titleBarDiv).height||Echo.Sync.Extent.toPixels(Echo.WindowPane.DEFAULT_TITLE_HEIGHT);
}this._titleBarDiv.style.top=this._contentInsets.top+"px";this._titleBarDiv.style.left=this._contentInsets.left+"px";this._titleBarDiv.style.height=this._titleBarHeight+"px";this._titleBarDiv.style.overflow="hidden";if(e){this._titleBarDiv.style.cursor="move";Core.Web.Event.add(this._titleBarDiv,"mousedown",Core.method(this,this._processTitleBarMouseDown),true);}Echo.Sync.Color.render(this.component.render("titleForeground"),this._titleBarDiv,"color");var p=this.component.render("titleBackground");var k=this.component.render("titleBackgroundImage");if(p){this._titleBarDiv.style.backgroundColor=p;}if(k){Echo.Sync.FillImage.render(k,this._titleBarDiv);}if(!p&&!k){this._titleBarDiv.style.backgroundColor=Echo.WindowPane.DEFAULT_TITLE_BACKGROUND;}if(d){this._controlDiv=document.createElement("div");this._controlDiv.style.cssText="position:absolute;top:0;";this._controlDiv.style[this._rtl?"left":"right"]=0;Echo.Sync.Insets.render(this.component.render("controlsInsets",Echo.WindowPane.DEFAULT_CONTROLS_INSETS),this._controlDiv,"margin");
this._titleBarDiv.appendChild(this._controlDiv);if(g){this._renderControlIcon("close",this.client.getResourceUrl("Echo","resource/WindowPaneClose.gif"),"[X]");}if(h){this._renderControlIcon("maximize",this.client.getResourceUrl("Echo","resource/WindowPaneMaximize.gif"),"[+]");}if(c){this._renderControlIcon("minimize",this.client.getResourceUrl("Echo","resource/WindowPaneMinimize.gif"),"[-]");}}this._div.appendChild(this._titleBarDiv);this._contentDiv.style.cssText="position:absolute;z-index:2;top:"+(this._contentInsets.top+this._titleBarHeight)+"px;bottom:"+this._contentInsets.bottom+"px;left:"+this._contentInsets.left+"px;right:"+this._contentInsets.right+"px;"+"overflow:"+((this.component.children.length===0||this.component.children[0].pane)?"hidden;":"auto;");Echo.Sync.Font.renderClear(this.component.render("font"),this._contentDiv);if(this.component.children.length>0&&!this.component.children[0].pane){Echo.Sync.Insets.render(this.component.render("insets"),this._contentDiv,"padding");
}Echo.Sync.Color.render(this.component.render("background",Echo.WindowPane.DEFAULT_BACKGROUND),this._contentDiv,"backgroundColor");Echo.Sync.Color.render(this.component.render("foreground",Echo.WindowPane.DEFAULT_FOREGROUND),this._contentDiv,"color");Echo.Sync.FillImage.render(this.component.render("backgroundImage"),this._contentDiv);this._div.appendChild(this._contentDiv);if(Core.Web.Env.QUIRK_IE_SELECT_Z_INDEX){this._div.appendChild(this._maskDiv);}Core.Web.Event.add(this._div,"click",Core.method(this,this._processFocusClick),true);f.appendChild(this._div);},_renderControlIcon:function(d,h,b){var a=document.createElement("div"),g=this.component.render(d+"Icon",h),f=this.component.render(d+"RolloverIcon");var e=Echo.Sync.Extent.toCssValue(this.component.render("controlsSpacing",Echo.WindowPane.DEFAULT_CONTROLS_SPACING));a.style.cssText=this._rtl?("float:left;cursor:pointer;margin-right:"+e):("float:right;cursor:pointer;margin-left:"+e);Echo.Sync.Insets.render(this.component.render(d+"Insets"),a,"padding");
if(g){var c=document.createElement("img");Echo.Sync.ImageReference.renderImg(g,c);a.appendChild(c);if(f){Core.Web.Event.add(a,"mouseover",Core.method(this,this._processControlRolloverEnter),false);Core.Web.Event.add(a,"mouseout",Core.method(this,this._processControlRolloverExit),false);}}else{a.appendChild(document.createTextNode(b));}Core.Web.Event.add(a,"click",Core.method(this,this._processControlClick),false);this._controlDiv.appendChild(a);if(this._controlIcons==null){this._controlIcons=[];}this._controlIcons.push(a);a._controlData={name:d,icon:g,rolloverIcon:f};},renderDisplay:function(){this._loadContainerSize();this._setBounds(this._requested,false);Core.Web.VirtualPosition.redraw(this._contentDiv);Core.Web.VirtualPosition.redraw(this._maskDiv);this._centerIcon();var a=parseInt(this.component.render("resourceTimeout"),10)||Echo.WindowPane.DEFAULT_RESOURCE_TIMEOUT;if(!this._initialRenderDisplayComplete){this._initialRenderDisplayComplete=true;if(a){if(Core.Web.Image.monitor(this._div,Core.method(this,this._imageLoadListener))){this._imageWaitStartTime=new Date().getTime();
}}}if(!this._displayed){if(this._imageWaitStartTime&&new Date().getTime()>this._imageWaitStartTime+a){this._imageWaitStartTime=null;}if(!this._imageWaitStartTime){this._displayed=true;var b=(Core.Web.Env.NOT_SUPPORTED_CSS_OPACITY||!this._opening)?0:this.component.render("openAnimationTime",0);if(b>0){Core.Web.Scheduler.add(new Echo.Sync.WindowPane.FadeRunnable(this._div,false,b,null));this._div.style.opacity=0;}this._div.style.visibility="";}}},renderDispose:function(a){this._overlayRemove();this._renderDisposeFrame();this._maskDiv=null;this._contentDiv=null;this._controlDiv=null;},_renderDisposeFrame:function(){var a;Core.Web.Event.removeAll(this._div);for(a=0;a<8;++a){if(this._borderDivs[a]){Core.Web.Event.removeAll(this._borderDivs[a]);}}this._borderDivs=null;if(this._controlIcons!=null){for(a=0;a<this._controlIcons.length;++a){Core.Web.Event.removeAll(this._controlIcons[a]);}this._controlIcons=null;}Core.Web.Event.removeAll(this._titleBarDiv);this._titleBarDiv=null;this._titleIconDiv=null;
this._titleIconImg=null;this._titleIconImgLoading=false;this._div=null;},renderFocus:function(){Core.Web.DOM.focusElement(this._div);},renderUpdate:function(c){if(c.hasAddedChildren()||c.hasRemovedChildren()){}else{if(c.isUpdatedPropertySetIn(Echo.Sync.WindowPane.NON_RENDERED_PROPERTIES)){return false;}else{if(c.isUpdatedPropertySetIn(Echo.Sync.WindowPane.PARTIAL_PROPERTIES_POSITION_SIZE)){this._loadPositionAndSize();return false;}else{if(c.isUpdatedPropertySetIn(Echo.Sync.WindowPane.PARTIAL_PROPERTIES)){this._renderUpdateFrame();return false;}}}}var a=this._div;var b=a.parentNode;Echo.Render.renderComponentDispose(c,c.parent);b.removeChild(a);this.renderAdd(c,b);return true;},_renderUpdateFrame:function(){var a=this._div;var b=a.parentNode;this._renderDisposeFrame();b.removeChild(a);this._renderAddFrame(b);},_setBounds:function(h,f){var b={},i=false;if(f){if(h.x!=null&&h.x<0){h.x=0;}if(h.y!=null&&h.y<0){h.y=0;}}if(h.width!=null){b.width=Math.round(Echo.Sync.Extent.isPercent(h.width)?(parseInt(h.width,10)*this._containerSize.width/100):Echo.Sync.Extent.toPixels(h.width,true));
}else{if(h.contentWidth!=null){b.contentWidth=Math.round(Echo.Sync.Extent.isPercent(h.contentWidth)?(parseInt(h.contentWidth,10)*this._containerSize.width/100):Echo.Sync.Extent.toPixels(h.contentWidth,true));b.width=this._contentInsets.left+this._contentInsets.right+b.contentWidth;}}if(h.height!=null){b.height=Math.round(Echo.Sync.Extent.isPercent(h.height)?(parseInt(h.height,10)*this._containerSize.height/100):Echo.Sync.Extent.toPixels(h.height,false));}else{if(h.contentHeight!=null){b.contentHeight=Math.round(Echo.Sync.Extent.isPercent(h.contentHeight)?(parseInt(h.contentHeight,10)*this._containerSize.height/100):Echo.Sync.Extent.toPixels(h.contentHeight,false));b.height=this._contentInsets.top+this._contentInsets.bottom+this._titleBarHeight+b.contentHeight;}else{if(!f){i=true;if(this.component.children[0]){var a=b.contentWidth?b.contentWidth:b.width-(this._contentInsets.left+this._contentInsets.right);var d=this._contentDiv.style.cssText;if(this.component.children[0].peer.getPreferredSize){this._contentDiv.style.cssText="position:absolute;width:"+a+"px;height:"+this._containerSize.height+"px";
var c=this.component.children[0].peer.getPreferredSize(Echo.Render.ComponentSync.SIZE_HEIGHT);if(c&&c.height){b.height=this._contentInsets.top+this._contentInsets.bottom+this._titleBarHeight+c.height;}this._contentDiv.style.cssText=d;}if(!b.height&&!this.component.children[0].pane){var e=Echo.Sync.Insets.toPixels(this.component.render("insets"));this._contentDiv.style.position="static";this._contentDiv.style.width=(a-e.left-e.right)+"px";this._contentDiv.style.height="";this._contentDiv.style.padding="";var g=new Core.Web.Measure.Bounds(this._contentDiv).height;if(g){b.height=this._contentInsets.top+this._contentInsets.bottom+this._titleBarHeight+g+e.top+e.bottom;}this._contentDiv.style.cssText=d;}}if(!b.height){b.height=Echo.Sync.Extent.toPixels(Echo.WindowPane.DEFAULT_HEIGHT,false);}}}}if(h.x!=null){if(Echo.Sync.Extent.isPercent(h.x)){b.x=Math.round((this._containerSize.width-b.width)*(parseInt(h.x,10)/100));if(b.x<0){b.x=0;}}else{b.x=Math.round(Echo.Sync.Extent.toPixels(h.x,true));if(b.x<0){b.x+=this._containerSize.width-b.width;
}}}if(h.y!=null){if(Echo.Sync.Extent.isPercent(h.y)){b.y=Math.round((this._containerSize.height-b.height)*(parseInt(h.y,10)/100));if(b.y<0){b.y=0;}}else{b.y=Math.round(Echo.Sync.Extent.toPixels(h.y,false));if(b.y<0){b.y+=this._containerSize.height-b.height;}}}if(this._rendered==null){this._rendered={};}if(b.width!=null){if(this._resizable&&b.width>this._containerSize.width){b.width=this._containerSize.width;}if(this._maximumWidth&&b.width>this._maximumWidth){if(f&&b.x!=null){b.x+=(b.width-this._maximumWidth);}b.width=this._maximumWidth;}if(b.width<this._minimumWidth){if(f&&b.x!=null){b.x+=(b.width-this._minimumWidth);}b.width=this._minimumWidth;}this._rendered.width=Math.round(b.width);}if(b.height!=null){if((i||this._resizable)&&b.height>this._containerSize.height){b.height=this._containerSize.height;}if(this._maximumHeight&&b.height>this._maximumHeight){if(f&&b.y!=null){b.y+=(b.height-this._maximumHeight);}b.height=this._maximumHeight;}if(b.height<this._minimumHeight){if(f&&b.y!=null){b.y+=(b.height-this._minimumHeight);
}b.height=this._minimumHeight;}this._rendered.height=Math.round(b.height);}if(b.x!=null){if(this._containerSize.width>0&&b.x>this._containerSize.width-this._rendered.width){b.x=this._containerSize.width-this._rendered.width;}if(b.x<0){b.x=0;}this._rendered.x=Math.round(b.x);}if(b.y!=null){if(this._containerSize.height>0&&b.y>this._containerSize.height-this._rendered.height){b.y=this._containerSize.height-this._rendered.height;}if(b.y<0){b.y=0;}this._rendered.y=Math.round(b.y);}this._redraw();}});