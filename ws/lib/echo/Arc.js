Echo.Arc={};Echo.Arc.Application=Core.extend(Echo.Application,{arcSync:null,isActive:function(){if(!this.arcSync.component.isActive()){return false;}else{return Echo.Application.prototype.isActive.call(this);}}});Echo.Arc.Client=Core.extend(Echo.FreeClient,{arcSync:null,verifyInput:function(b,a){if(!this.arcSync.client.verifyInput(this.arcSync.component,a)){return false;}return Echo.FreeClient.prototype.verifyInput.call(this,b,a);}});Echo.Arc.ComponentSync=Core.extend(Echo.Render.ComponentSync,{arcApplication:null,arcClient:null,baseComponent:null,_defaultDomainElement:null,_applicationFocusRef:null,$abstract:{createComponent:function(){}},$virtual:{getDomainElement:function(){if(!this._defaultDomainElement){this._defaultDomainElement=document.createElement("div");}return this._defaultDomainElement;},_processApplicationFocus:function(a){if(a.source==this.component.application){if(a.newValue!=this.component){this.arcApplication.setFocusedComponent(null);}}else{if(a.source==this.arcApplication&&a.newValue){this.component.application.setFocusedComponent(this.component);
}}},renderAdd:function(c,a){var b=this.getDomainElement();a.appendChild(b);},renderDisplay:function(){if(this.arcApplication){if(!this.baseComponent.peer){return;}Echo.Render.renderComponentDisplay(this.baseComponent);}else{this.arcApplication=new Echo.Arc.Application();this.arcApplication.arcSync=this;this.arcApplication.setStyleSheet(this.client.application.getStyleSheet());this.baseComponent=this.createComponent();if(!this.baseComponent){throw new Error("Invalid base component: null");}this.arcApplication.rootComponent.add(this.baseComponent);this.arcClient=new Echo.Arc.Client(this.arcApplication,this.getDomainElement());this.arcClient.arcSync=this;this.arcClient.parent=this.client;this.arcClient.init();this._applicationFocusRef=Core.method(this,this._processApplicationFocus);this.arcApplication.addListener("focus",this._applicationFocusRef);this.client.application.addListener("focus",this._applicationFocusRef);}},renderDispose:function(a){if(this._applicationFocusRef){this.arcApplication.removeListener("focus",this._applicationFocusRef);
this.client.application.removeListener("focus",this._applicationFocusRef);this._applicationFocusRef=null;}if(this.arcClient){this.arcClient.dispose();this.arcClient=null;}if(this.arcApplication){this.arcApplication.arcSync=null;this.arcApplication=null;this.baseComponent=null;}this._defaultDomainElement=null;},renderHide:function(){if(this.arcApplication){if(!this.baseComponent.peer){return;}Echo.Render.renderComponentHide(this.baseComponent);}},renderUpdate:function(c){var a=this.getDomainElement();var b=a.parentNode;Echo.Render.renderComponentDispose(c,c.parent);b.removeChild(a);this.renderAdd(c,b);}}});Echo.Arc.ChildContainer=Core.extend(Echo.Component,{$load:function(){Echo.ComponentFactory.registerType("ArcChildContainer",this);},componentType:"ArcChildContainer"});Echo.Arc.ChildContainerPeer=Core.extend(Echo.Render.ComponentSync,{$load:function(){Echo.Render.registerPeer("ArcChildContainer",this);},renderAdd:function(c,a){this._div=document.createElement("div");var b=this.component.get("component");
if(b){if(!b.parent||!b.parent.peer||!b.parent.peer.client){throw new Error("Invalid component: not part of registered hierarchy.");}Echo.Render.renderComponentAdd(null,b,this._div);}a.appendChild(this._div);},renderDisplay:function(){var a=this.component.get("component");if(a){Echo.Render.renderComponentDisplay(a);}},renderDispose:function(b){var a=this.component.get("component");if(a){Echo.Render.renderComponentDispose(null,a);}this._div=null;},renderUpdate:function(a){}});